{"remainingRequest":"E:\\lottery_mobile_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\lottery_mobile_vue\\src\\components\\games\\bettingFiled\\BetttingField.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\lottery_mobile_vue\\src\\components\\games\\bettingFiled\\BetttingField.vue","mtime":1558951234000},{"path":"E:\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\lottery_mobile_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\lottery_mobile_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport { _betting } from \"@/assets/src/forgame.js\";\r\nimport { setInterval, clearInterval } from 'timers';\r\n\r\nexport default {\r\n    props: {\r\n        barMax: Number,\r\n        forbet: Array,\r\n        quantity: Number,\r\n        rate: Number,\r\n        time: Object,\r\n        issueTrace: Boolean\r\n    },\r\n    data() {\r\n        return {\r\n            unitPrice: 2,\r\n            barValue: 0,\r\n            detailData: {\r\n                play: '',\r\n                name: '',\r\n            },\r\n            // 购物车测试用\r\n            orderDetail: [],\r\n            betSubInfo: [],\r\n            panko: this.$store.state.panko,\r\n            openPage: true,\r\n            openSlide: false, //是否追單\r\n            WinningStop: false, //中獎停止\r\n            ChasingCondition: false, //追號條件\r\n            WinorLose: false, // 贏or輸\r\n            acLimit: 0,\r\n            issueCount: 3, //追號期數           \r\n            double: 1, //倍率\r\n            isshowdDetailFb: false, //详细下注弹窗是否开启 \r\n            mask: true,\r\n            bettingmsg: false,\r\n            warningOpen: false, //alert warning 弹窗\r\n            successOpen:false,\r\n            alertMsg:null,\r\n            closemsg: false, //封盘显示弹窗\r\n            closesecond: 5, //秒数自动关闭\r\n            closetimer:null // timer\r\n        };\r\n    },\r\n    methods: {\r\n        alert(msg){\r\n            this.alertMsg = msg\r\n            this.warningOpen = true\r\n        },\r\n        alertSuc(msg){\r\n            this.alertMsg = msg\r\n            this.successOpen = true\r\n        },\r\n        betting() { //立即下注\r\n            let _summaryAmt = 0;\r\n            let _betMainInfo = [];\r\n            let bet = this.forbet\r\n            if (this.forbet.length == 0) {\r\n                this.alert('请选择一注')\r\n                return;\r\n            }\r\n            bet.forEach(e => {\r\n                let b = e.betMainInfo\r\n                b.unitPrice = parseInt(this.unitPrice); //写入单价\r\n                _summaryAmt += parseInt(b.unitPrice) * parseInt(b.quantity); //计算总额\r\n                _betMainInfo.push(b)\r\n\r\n            });\r\n\r\n            //更新vuex 状态\r\n            this.$store.dispatch(\"setbetMainInfo\", _betMainInfo)\r\n            this.$store.dispatch('updatesummaryAmt', _summaryAmt)\r\n            this.$store.dispatch(\"setbetSubInfo\", this.betSubInfo);\r\n\r\n            this.bettingmsg = true\r\n            _betting(this)\r\n\r\n        },\r\n        openshopcar() {\r\n            if (this.sumcount == 0) {\r\n                this.alert('购物车是空的')\r\n                return;\r\n            }\r\n            this.openPage = !this.openPage\r\n        },\r\n        toshopcar() {\r\n            if (this.forbet.length == 0) {\r\n                this.alert('请选择一注')\r\n                return;\r\n            }\r\n\r\n            this.forbet.forEach(e => {\r\n                e.betMainInfo.unitPrice = parseInt(this.unitPrice); //写入单价                 \r\n                this.orderDetail.push(e)\r\n            });\r\n\r\n            this.$parent.childByValue()\r\n            this.alertSuc('已加入购物篮')\r\n        },\r\n        shopbet() {\r\n            let _betMainInfo = []\r\n            this.orderDetail.forEach(function(v, i) {\r\n                _betMainInfo.push(v.betMainInfo)\r\n            })\r\n            if (this.issueTrace) { //有追號\r\n                let bet = this.$store.state.bet\r\n\r\n                bet.preOrder = true;\r\n                bet.autoCancel = this.WinningStop ? 1 : 0\r\n                bet.aclSign = this.ChasingCondition ? 1 : 0\r\n\r\n                if (this.ChasingCondition)\r\n                    bet.acLimit = this.acLimit\r\n                bet.issueNoCount = this.betSubInfo.length\r\n                bet.summaryAmt = this.summary\r\n                bet.betMainInfo = _betMainInfo\r\n                bet.betSubInfo = this.betSubInfo\r\n\r\n                this.$store.dispatch(\"updateBet\", bet)\r\n\r\n            } else { //無追號\r\n\r\n                //更新vuex 状态\r\n                this.$store.dispatch(\"setbetMainInfo\", _betMainInfo)\r\n                this.$store.dispatch('updatesummaryAmt', this.summary)\r\n                this.$store.dispatch(\"setbetSubInfo\", this.betSubInfo);\r\n            }\r\n            this.bettingmsg = true\r\n            _betting(this)\r\n        },\r\n        removeItem(uid) {\r\n            let bet = this.orderDetail.filter(function(v, i) {\r\n                return v.uid != uid\r\n            })\r\n            this.orderDetail = bet\r\n        },\r\n        init() {\r\n            this.$parent.childByValue()\r\n            this.$parent.bundledatainit()\r\n            this.orderDetail = []\r\n            this.betMainInfo = []\r\n            this.openPage = true\r\n            this.openSlide = false\r\n            this.double = 1\r\n            this.bettingmsg = false\r\n            //状态初始\r\n            let bet = this.$store.state.bet\r\n            bet.issueNoCount = 1\r\n            bet.summaryAmt = 0\r\n            bet.preOrder = false\r\n            bet.betMainInfo = []\r\n            bet.betSubInfo = [{ issueNo: this.$store.state.panko.openissueNo, multiple: 1 }]\r\n            this.$store.dispatch(\"updateBet\", bet)\r\n        },\r\n        setbetSubInfo() {\r\n            if (this.openSlide) {\r\n                let t = this\r\n                let arr = []\r\n                this.$store.state.issueNoTrace.filter(function(v, i) {\r\n                    if (i < t.issueCount) arr.push({ issueNo: v.issueNo, multiple: 1 })\r\n                })\r\n                this.betSubInfo = arr\r\n            } else\r\n                this.betSubInfo = [{ issueNo: this.$store.state.panko.openissueNo, multiple: 1 }]\r\n        },\r\n        // 详细下注资讯\r\n        showDetail(play, name) {\r\n            this.isshowdDetailFb = true;\r\n            this.detailData.play = play;\r\n            this.detailData.name = name;\r\n        },\r\n        checkunitPrice() {            \r\n            if (this.unitPrice == '' ||  parseInt(this.unitPrice) <1) this.unitPrice = 1          \r\n        },     \r\n        timer(){ //封盘显示timer\r\n            this.closetimer = setInterval(()=>{\r\n                this.closesecond--                \r\n                if(this.closesecond==0){\r\n                    this.stoptimer()\r\n                    this.closemsg=false\r\n                }\r\n            },1000)\r\n        },\r\n        stoptimer(){\r\n            clearInterval(this.closetimer)\r\n            this.closesecond=5\r\n        },\r\n        \r\n    },\r\n    watch: {\r\n        barValue(nv, ov) {\r\n            this.$emit('update:rate', parseFloat(nv));\r\n        },\r\n        issueCount(nv, ov) {\r\n            if (nv > this.maxIssueCount) {\r\n                this.issueCount = this.maxIssueCount\r\n                this.alert('最大追单期数:' + this.maxIssueCount)\r\n            } else if (nv < 1) {\r\n                this.issueCount = 1\r\n            }\r\n            this.double = 1\r\n            this.setbetSubInfo()\r\n        },\r\n        openSlide(nv, ov) {\r\n            this.setbetSubInfo()\r\n        },\r\n        double(nv, ov) {\r\n            if (nv < 1) this.double = 1\r\n\r\n            for (let i = 0; i < this.betSubInfo.length; i++) {\r\n                this.betSubInfo[0].multiple = 1\r\n                if (i > 0)\r\n                    this.betSubInfo[i].multiple = this.betSubInfo[i - 1].multiple * this.double\r\n            }\r\n        },\r\n        rate(nv, ov) {\r\n            this.barValue = nv\r\n        },\r\n        '$store.state.panko': {\r\n            handler(nv, ov) {\r\n                this.betSubInfo = new Array({ issueNo: this.$store.state.panko.openissueNo, multiple: 1 })\r\n            },\r\n            deep: true\r\n        },\r\n        closemsg(nv, ov) {\r\n            if (nv == true) {\r\n                this.timer()               \r\n            }\r\n        },\r\n        \r\n    },\r\n    computed: {\r\n        balance() {\r\n            return this.$store.state.balance;\r\n        },\r\n        sumcount() {\r\n            let sum = 0;\r\n            this.orderDetail.forEach(function(v, i) {\r\n                sum += v.betMainInfo.quantity\r\n            })\r\n            return sum\r\n        },\r\n        summary() {\r\n            let summary = 0;\r\n            this.orderDetail.forEach(function(v, i) {\r\n                summary += v.betMainInfo.quantity * v.betMainInfo.unitPrice\r\n            })\r\n            let multiple = 0\r\n            this.betSubInfo.forEach(function(v, i) {\r\n                multiple += isNaN(parseInt(v.multiple)) ? 0 : parseInt(v.multiple)\r\n            })\r\n\r\n            return summary * multiple\r\n        },\r\n        maxIssueCount() {\r\n            return this.$store.state.issueNoTrace.length\r\n        }\r\n    }\r\n};\r\n",{"version":3,"sources":["BetttingField.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BetttingField.vue","sourceRoot":"src/components/games/bettingFiled","sourcesContent":["<script>\r\nimport { _betting } from \"@/assets/src/forgame.js\";\r\nimport { setInterval, clearInterval } from 'timers';\r\n\r\nexport default {\r\n    props: {\r\n        barMax: Number,\r\n        forbet: Array,\r\n        quantity: Number,\r\n        rate: Number,\r\n        time: Object,\r\n        issueTrace: Boolean\r\n    },\r\n    data() {\r\n        return {\r\n            unitPrice: 2,\r\n            barValue: 0,\r\n            detailData: {\r\n                play: '',\r\n                name: '',\r\n            },\r\n            // 购物车测试用\r\n            orderDetail: [],\r\n            betSubInfo: [],\r\n            panko: this.$store.state.panko,\r\n            openPage: true,\r\n            openSlide: false, //是否追單\r\n            WinningStop: false, //中獎停止\r\n            ChasingCondition: false, //追號條件\r\n            WinorLose: false, // 贏or輸\r\n            acLimit: 0,\r\n            issueCount: 3, //追號期數           \r\n            double: 1, //倍率\r\n            isshowdDetailFb: false, //详细下注弹窗是否开启 \r\n            mask: true,\r\n            bettingmsg: false,\r\n            warningOpen: false, //alert warning 弹窗\r\n            successOpen:false,\r\n            alertMsg:null,\r\n            closemsg: false, //封盘显示弹窗\r\n            closesecond: 5, //秒数自动关闭\r\n            closetimer:null // timer\r\n        };\r\n    },\r\n    methods: {\r\n        alert(msg){\r\n            this.alertMsg = msg\r\n            this.warningOpen = true\r\n        },\r\n        alertSuc(msg){\r\n            this.alertMsg = msg\r\n            this.successOpen = true\r\n        },\r\n        betting() { //立即下注\r\n            let _summaryAmt = 0;\r\n            let _betMainInfo = [];\r\n            let bet = this.forbet\r\n            if (this.forbet.length == 0) {\r\n                this.alert('请选择一注')\r\n                return;\r\n            }\r\n            bet.forEach(e => {\r\n                let b = e.betMainInfo\r\n                b.unitPrice = parseInt(this.unitPrice); //写入单价\r\n                _summaryAmt += parseInt(b.unitPrice) * parseInt(b.quantity); //计算总额\r\n                _betMainInfo.push(b)\r\n\r\n            });\r\n\r\n            //更新vuex 状态\r\n            this.$store.dispatch(\"setbetMainInfo\", _betMainInfo)\r\n            this.$store.dispatch('updatesummaryAmt', _summaryAmt)\r\n            this.$store.dispatch(\"setbetSubInfo\", this.betSubInfo);\r\n\r\n            this.bettingmsg = true\r\n            _betting(this)\r\n\r\n        },\r\n        openshopcar() {\r\n            if (this.sumcount == 0) {\r\n                this.alert('购物车是空的')\r\n                return;\r\n            }\r\n            this.openPage = !this.openPage\r\n        },\r\n        toshopcar() {\r\n            if (this.forbet.length == 0) {\r\n                this.alert('请选择一注')\r\n                return;\r\n            }\r\n\r\n            this.forbet.forEach(e => {\r\n                e.betMainInfo.unitPrice = parseInt(this.unitPrice); //写入单价                 \r\n                this.orderDetail.push(e)\r\n            });\r\n\r\n            this.$parent.childByValue()\r\n            this.alertSuc('已加入购物篮')\r\n        },\r\n        shopbet() {\r\n            let _betMainInfo = []\r\n            this.orderDetail.forEach(function(v, i) {\r\n                _betMainInfo.push(v.betMainInfo)\r\n            })\r\n            if (this.issueTrace) { //有追號\r\n                let bet = this.$store.state.bet\r\n\r\n                bet.preOrder = true;\r\n                bet.autoCancel = this.WinningStop ? 1 : 0\r\n                bet.aclSign = this.ChasingCondition ? 1 : 0\r\n\r\n                if (this.ChasingCondition)\r\n                    bet.acLimit = this.acLimit\r\n                bet.issueNoCount = this.betSubInfo.length\r\n                bet.summaryAmt = this.summary\r\n                bet.betMainInfo = _betMainInfo\r\n                bet.betSubInfo = this.betSubInfo\r\n\r\n                this.$store.dispatch(\"updateBet\", bet)\r\n\r\n            } else { //無追號\r\n\r\n                //更新vuex 状态\r\n                this.$store.dispatch(\"setbetMainInfo\", _betMainInfo)\r\n                this.$store.dispatch('updatesummaryAmt', this.summary)\r\n                this.$store.dispatch(\"setbetSubInfo\", this.betSubInfo);\r\n            }\r\n            this.bettingmsg = true\r\n            _betting(this)\r\n        },\r\n        removeItem(uid) {\r\n            let bet = this.orderDetail.filter(function(v, i) {\r\n                return v.uid != uid\r\n            })\r\n            this.orderDetail = bet\r\n        },\r\n        init() {\r\n            this.$parent.childByValue()\r\n            this.$parent.bundledatainit()\r\n            this.orderDetail = []\r\n            this.betMainInfo = []\r\n            this.openPage = true\r\n            this.openSlide = false\r\n            this.double = 1\r\n            this.bettingmsg = false\r\n            //状态初始\r\n            let bet = this.$store.state.bet\r\n            bet.issueNoCount = 1\r\n            bet.summaryAmt = 0\r\n            bet.preOrder = false\r\n            bet.betMainInfo = []\r\n            bet.betSubInfo = [{ issueNo: this.$store.state.panko.openissueNo, multiple: 1 }]\r\n            this.$store.dispatch(\"updateBet\", bet)\r\n        },\r\n        setbetSubInfo() {\r\n            if (this.openSlide) {\r\n                let t = this\r\n                let arr = []\r\n                this.$store.state.issueNoTrace.filter(function(v, i) {\r\n                    if (i < t.issueCount) arr.push({ issueNo: v.issueNo, multiple: 1 })\r\n                })\r\n                this.betSubInfo = arr\r\n            } else\r\n                this.betSubInfo = [{ issueNo: this.$store.state.panko.openissueNo, multiple: 1 }]\r\n        },\r\n        // 详细下注资讯\r\n        showDetail(play, name) {\r\n            this.isshowdDetailFb = true;\r\n            this.detailData.play = play;\r\n            this.detailData.name = name;\r\n        },\r\n        checkunitPrice() {            \r\n            if (this.unitPrice == '' ||  parseInt(this.unitPrice) <1) this.unitPrice = 1          \r\n        },     \r\n        timer(){ //封盘显示timer\r\n            this.closetimer = setInterval(()=>{\r\n                this.closesecond--                \r\n                if(this.closesecond==0){\r\n                    this.stoptimer()\r\n                    this.closemsg=false\r\n                }\r\n            },1000)\r\n        },\r\n        stoptimer(){\r\n            clearInterval(this.closetimer)\r\n            this.closesecond=5\r\n        },\r\n        \r\n    },\r\n    watch: {\r\n        barValue(nv, ov) {\r\n            this.$emit('update:rate', parseFloat(nv));\r\n        },\r\n        issueCount(nv, ov) {\r\n            if (nv > this.maxIssueCount) {\r\n                this.issueCount = this.maxIssueCount\r\n                this.alert('最大追单期数:' + this.maxIssueCount)\r\n            } else if (nv < 1) {\r\n                this.issueCount = 1\r\n            }\r\n            this.double = 1\r\n            this.setbetSubInfo()\r\n        },\r\n        openSlide(nv, ov) {\r\n            this.setbetSubInfo()\r\n        },\r\n        double(nv, ov) {\r\n            if (nv < 1) this.double = 1\r\n\r\n            for (let i = 0; i < this.betSubInfo.length; i++) {\r\n                this.betSubInfo[0].multiple = 1\r\n                if (i > 0)\r\n                    this.betSubInfo[i].multiple = this.betSubInfo[i - 1].multiple * this.double\r\n            }\r\n        },\r\n        rate(nv, ov) {\r\n            this.barValue = nv\r\n        },\r\n        '$store.state.panko': {\r\n            handler(nv, ov) {\r\n                this.betSubInfo = new Array({ issueNo: this.$store.state.panko.openissueNo, multiple: 1 })\r\n            },\r\n            deep: true\r\n        },\r\n        closemsg(nv, ov) {\r\n            if (nv == true) {\r\n                this.timer()               \r\n            }\r\n        },\r\n        \r\n    },\r\n    computed: {\r\n        balance() {\r\n            return this.$store.state.balance;\r\n        },\r\n        sumcount() {\r\n            let sum = 0;\r\n            this.orderDetail.forEach(function(v, i) {\r\n                sum += v.betMainInfo.quantity\r\n            })\r\n            return sum\r\n        },\r\n        summary() {\r\n            let summary = 0;\r\n            this.orderDetail.forEach(function(v, i) {\r\n                summary += v.betMainInfo.quantity * v.betMainInfo.unitPrice\r\n            })\r\n            let multiple = 0\r\n            this.betSubInfo.forEach(function(v, i) {\r\n                multiple += isNaN(parseInt(v.multiple)) ? 0 : parseInt(v.multiple)\r\n            })\r\n\r\n            return summary * multiple\r\n        },\r\n        maxIssueCount() {\r\n            return this.$store.state.issueNoTrace.length\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<template src=\"./bettingField.html\">\r\n    \r\n</template>\r\n\r\n<style src=\"./bettingField.css\" scoped>\r\n\r\n</style>"]}]}