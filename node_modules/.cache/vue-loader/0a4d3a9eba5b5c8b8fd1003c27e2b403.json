{"remainingRequest":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\westlottery\\lottery_mobile_vue\\src\\pages\\credit\\ssc\\SSC.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\src\\pages\\credit\\ssc\\SSC.vue","mtime":1557912551325},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n\r\nimport HistoricalboardComponent from \"@/components/games/historicalboard/Historicalboard.vue\";\r\nimport BettingFieldComponent from \"@/components/games/bettingFiled/BetttingField.vue\";\r\nimport { _getbettime, _payRate } from \"@/assets/src/forgame.js\";\r\n// 汇入选择游戏组件\r\nimport GameChoiceComponent from \"@/components/games/gameChoice/GameChoice.vue\";\r\nimport Option_slideComponent from \"@/components/games/option_slide/Option_slide.vue\";\r\nimport Special from \"@/components/games/special/Special.vue\";\r\nimport {\r\n  calPayRate,\r\n  calPayRate2,\r\n  combination,\r\n  uniquearr,\r\n  randomRangeId,\r\n  gamestatus,\r\n  cleartimer,  \r\n} from \"@/assets/src/forgame\";\r\nimport { debug } from 'util';\r\n\r\n\r\n//龙虎和\r\n\r\nlet dtt=[]\r\nfor(let i = 1 ; i<5 ;i++){\r\n  for(let j = i+1;j<6;j++){\r\n    dtt.push({\r\n                  classificationNum: i+\"对\"+j,\r\n                  classificationArr:[\r\n                    {\r\n                      play: \"龙\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"Dragon\"+ i +\"vs\"+ j, odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"和\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"Tie\"+ i +\"vs\"+ j, odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"虎\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"Tiger\"+ i +\"vs\"+ j, odds: 0 }],\r\n                    },\r\n                    ]\r\n                })\r\n  }\r\n}\r\n//大小单双\r\nlet bsoe = ['B','S','O','E'];\r\n\r\nlet ebsoe = [\"大\",\"小\",\"单\",\"双\"];\r\nfor(let i = 0 ; i<4 ; i++){\r\n  bsoe.push({\r\n    play:ebsoe[i],\r\n    checked:false,\r\n    oddsArr:[{id:\"\", odds: 0 }],\r\n  })\r\n}\r\nlet arr10=[]\r\nfor (let i =0 ; i<10 ; i++){\r\n  arr10.push(i)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default {\r\n  name: \"SSC\",\r\n  components: {\r\n    HistoricalboardComponent,\r\n    BettingFieldComponent,\r\n    GameChoiceComponent,\r\n    Option_slideComponent,\r\n    Special\r\n  },\r\n  data() {\r\n    return {\r\n      gameMenu: [\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"龙虎斗\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: dtt\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"百家乐\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification:[\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:[\r\n                    {\r\n                      play: \"闲对\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"PlayerPair\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"和\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"Tie\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"庄对\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"BankerPair\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"闲赢\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"PlayerWin\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"庄赢\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"BankerWin\", odds: 0 }],\r\n                    },\r\n                  ]\r\n                }\r\n              ]\r\n            },\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"全5中1\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:this.arrCreated(arr10,'All5in1_'),\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"万位\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:this.arrCreated(ebsoe,'Pos0-').concat(this.arrCreated(arr10,'Fixed-P')),\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"千位\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:this.arrCreated(ebsoe,'Pos1-').concat(this.arrCreated(arr10,'Fixed-P')),\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"百位\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:this.arrCreated(ebsoe,'Pos2-').concat(this.arrCreated(arr10,'Fixed-P')),\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"十位\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:this.arrCreated(ebsoe,'Pos3-').concat(this.arrCreated(arr10,'Fixed-P')),\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"个位\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:this.arrCreated(ebsoe,'Pos4-').concat(this.arrCreated(arr10,'Fixed-P')),\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"前三球\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:[\r\n                    {\r\n                      play: \"豹子\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"F3-S-Triple\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"顺子\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"F3-S-Straight\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"对子\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"F3-S-Double\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"半顺\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"F3-S-HalfStraight\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"杂六\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"F3-S-Mix\", odds: 0 }],\r\n                    },\r\n                  ]\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"后三球\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:[\r\n                    {\r\n                      play: \"豹子\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"L3-S-Triple\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"顺子\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"L3-S-Straight\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"对子\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"L3-S-Double\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"半顺\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"L3-S-HalfStraight\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"杂六\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"L3-S-Mix\", odds: 0 }],\r\n                    },\r\n                  ]\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          open: this.$route.params.id=='txffc'? false : true,\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"总和\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:this.arrCreated(ebsoe,\"Sum-\")\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n      ],\r\n      offTitle: 0,\r\n      OffSubTitle: 0,\r\n      option_slide_idx: null,\r\n      payrate: { value: {} },\r\n      time: { value: \"\" },\r\n      barMax: 0, //--->子组件\r\n      rebatRate: 0, //与子组件双向绑定\r\n      forbet: [], //投注暂存\r\n      quantity: 0,\r\n      currentName: \"\", //购物车玩法显示\r\n      issueTrace: true, //是否可追号\r\n      shortName: [],\r\n      mask:true\r\n    };\r\n  },\r\n  mounted() {\r\n     window.scrollTo(0,0);\r\n    let t = this;\r\n    let gameCode = this.$route.params.id;    \r\n    this.setCookie('currentGameName',encodeURI(this.$route.meta.title),0.5) //safari 不支持存中文 要编码 \r\n    gamestatus(this, gameCode, function(res) {\r\n      if (Object.keys(res).length === 0) {\r\n        alert(\"维护中\");\r\n        t.$router.push({ path: \"/index\" });\r\n        return;\r\n      } //更新vuex 状态\r\n      t.$store.dispatch(\"updatebetGameCode\", gameCode);\r\n      _getbettime(t, gameCode, t.time); //盘口资料\r\n      _payRate(t, gameCode, \"2\", t.payrate); //赔率\r\n      \r\n    });\r\n  },\r\n  methods: {\r\n    //arrCreated\r\n    arrCreated: function(arr,id) {\r\n      let arrayReturn = [];\r\n      arr.forEach(function(item,index) {\r\n      if(isNaN(item)){ //大小单双\r\n        arrayReturn.push({\r\n          play: item,\r\n          checked: false,\r\n          oddsArr: [{ id: id + bsoe[index] , odds: 0 }],\r\n        });\r\n      }else{\r\n        if(id == \"Fixed-P\"){index = \"\"}\r\n        arrayReturn.push({\r\n          play: item,\r\n          checked: false,\r\n          oddsArr: [{ id: id + index , odds: 0 }],\r\n        });\r\n      }\r\n      });\r\n      return arrayReturn;\r\n    },\r\n    //   监听事件 : 监听玩法选择有无变动，若有则执行FN\r\n    clickOff: function(clickOffValue, clickSubValue) {\r\n      this.offTitle = clickOffValue;\r\n      this.OffSubTitle = clickSubValue;\r\n      this.currentName = this.gameMenu[clickOffValue].sub[clickSubValue].subName;\r\n    },\r\n    //监听如果开启选择玩法页面 就取消所有游戏选取\r\n    childByValue: function() {\r\n       this.gameMenu[this.offTitle].sub[this.OffSubTitle].classification.forEach(function(e){\r\n                e.classificationArr.forEach(function(i){\r\n                  i.checked=false\r\n                })\r\n            })\r\n      this.option_slide_idx = null;\r\n      this.quantity = 0;\r\n      this.forbet = []; //暂存清空\r\n      this.rebatRate = 0;\r\n    },\r\n    bundledatainit() {\r\n      //资料初始\r\n      let _t = this;\r\n\r\n      if (Object.keys(this.payrate.value).length > 0) {\r\n        this.gameMenu.forEach(function(v){\r\n            v.sub.forEach(function(v1){\r\n              v1.classification.forEach(function(v2){\r\n                v2.classificationArr.forEach(function(v3){\r\n                  _t.renderdata(v3.oddsArr);\r\n                })\r\n              })\r\n            })\r\n        });        \r\n      }\r\n      this.mask=false\r\n    },\r\n    renderdata(obj) {\r\n      //玩法阵列资料绑定\r\n      let _t = this;\r\n      obj.forEach(function(v) {\r\n        let _p = _t.payrate.value[v.id];\r\n        v.odds = calPayRate(_p, 0);\r\n        v.odds2 = calPayRate2(_p, 0);\r\n        v.playTypeS = _p.playTypeS;\r\n        v.playTypeM = _p.playTypeM;\r\n        _t.barMax = _p.rebatRate;\r\n      });\r\n    },\r\n    barrenderdata(obj) {\r\n      //拉动bar 玩法赔率变动\r\n      let _t = this;\r\n      obj.forEach(function(v) {\r\n        let _p = _t.payrate.value[v.id];\r\n        v.odds = calPayRate(_p, _t.rebatRate);\r\n        v.odds2 = calPayRate2(_p, _t.rebatRate);\r\n      });\r\n    },\r\n    //选取的号码\r\n    checkNum(Arr) {      \r\n      \r\n        let _t = this;\r\n            this.forbet = [];           \r\n\r\nArr.forEach(function(k){\r\nlet checkedArr = k.classificationArr.filter(function(v) {\r\n                return v.checked == true\r\n            })\r\n            checkedArr.forEach(function(e) {\r\n                let positions = ['', '', '', '', ''];\r\n                if (e.oddsArr[0].id == 'Fixed-P') {\r\n                  let positoinsindex;\r\n                  switch(_t.currentName){\r\n                    \r\n                    case '万位':{\r\n                      positoinsindex = 0\r\n                      break;\r\n                    }\r\n                    case '千位':{\r\n                      positoinsindex = 1\r\n                      break;\r\n                    }\r\n                    case '百位':{\r\n                      positoinsindex = 2\r\n                      break;\r\n                    }\r\n                    case '十位':{\r\n                      positoinsindex = 3\r\n                      break;\r\n                    }\r\n                    case '个位':{\r\n                      positoinsindex = 4\r\n                      break;\r\n                    }\r\n                    default :{\r\n                      console.error(\"error\");\r\n                    }\r\n                  }\r\n                    positions[positoinsindex] = e.play.toString()\r\n                }\r\n                let tplay = e.play \r\n                e =e.oddsArr[0]\r\n                _t.forbet.push({\r\n                    uid: randomRangeId(10),\r\n                    id: e.id,\r\n                    play: tplay,\r\n                    name: _t.currentName,\r\n                    betMainInfo: {\r\n                        playTypeM: e.playTypeM,\r\n                        playTypeS: e.playTypeS,\r\n                        positions: positions,\r\n                        quantity: 1,\r\n                        payRate: e.odds,\r\n                        payRate2: e.odds2,\r\n                        rebatRate: _t.rebatRate,\r\n                        unitPrice: 0\r\n                    }\r\n                });\r\n\r\n            })\r\n})\r\n      let Plus = 0;\r\n      this.forbet.forEach(function(v) {\r\n        Plus += v.betMainInfo.quantity;\r\n      });\r\n\r\n      this.quantity = Plus;\r\n    }\r\n  },\r\n  watch: {\r\n    payrate: {\r\n      deep: true,\r\n      handler() {\r\n        this.bundledatainit();\r\n      }\r\n    },\r\n    rebatRate(nv) {\r\n      let _t = this;\r\n      this.rebatRate = nv;\r\n      //画面、阵列更新\r\n      this.gameMenu[this.offTitle].sub[this.OffSubTitle].classification\r\n      .forEach(function(v){\r\n        v.classificationArr.forEach(function(va){\r\n          _t.barrenderdata(va.oddsArr)\r\n        })\r\n      });\r\n      //已选的下注 更新资料\r\n      if (this.forbet.length > 0) {\r\n        this.forbet.forEach(function(v) {\r\n          let _p = _t.payrate.value[v.id];\r\n          v.betMainInfo.payRate = calPayRate(_p, nv);\r\n          v.betMainInfo.payRate2 = calPayRate2(_p, nv);\r\n          v.betMainInfo.rebatRate = nv;\r\n        });\r\n      }\r\n    }\r\n  },\r\n  destroyed() {\r\n    const unWatch = this.$watch(\"payrate\");\r\n    unWatch(); // 手动注销watch\r\n    this.childByValue();\r\n    cleartimer()\r\n  },\r\n  computed: {\r\n     donotTouch() {\r\n            return this.$store.state.dontTouch;\r\n     }\r\n  }\r\n};\r\n",{"version":3,"sources":["SSC.vue"],"names":[],"mappings":";;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SSC.vue","sourceRoot":"src/pages/credit/ssc","sourcesContent":["<template src=\"./SSC.html\"></template>\r\n\r\n<script>\r\nimport HistoricalboardComponent from \"@/components/games/historicalboard/Historicalboard.vue\";\r\nimport BettingFieldComponent from \"@/components/games/bettingFiled/BetttingField.vue\";\r\nimport { _getbettime, _payRate } from \"@/assets/src/forgame.js\";\r\n// 汇入选择游戏组件\r\nimport GameChoiceComponent from \"@/components/games/gameChoice/GameChoice.vue\";\r\nimport Option_slideComponent from \"@/components/games/option_slide/Option_slide.vue\";\r\nimport Special from \"@/components/games/special/Special.vue\";\r\nimport {\r\n  calPayRate,\r\n  calPayRate2,\r\n  combination,\r\n  uniquearr,\r\n  randomRangeId,\r\n  gamestatus,\r\n  cleartimer,  \r\n} from \"@/assets/src/forgame\";\r\nimport { debug } from 'util';\r\n\r\n\r\n//龙虎和\r\n\r\nlet dtt=[]\r\nfor(let i = 1 ; i<5 ;i++){\r\n  for(let j = i+1;j<6;j++){\r\n    dtt.push({\r\n                  classificationNum: i+\"对\"+j,\r\n                  classificationArr:[\r\n                    {\r\n                      play: \"龙\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"Dragon\"+ i +\"vs\"+ j, odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"和\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"Tie\"+ i +\"vs\"+ j, odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"虎\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"Tiger\"+ i +\"vs\"+ j, odds: 0 }],\r\n                    },\r\n                    ]\r\n                })\r\n  }\r\n}\r\n//大小单双\r\nlet bsoe = ['B','S','O','E'];\r\n\r\nlet ebsoe = [\"大\",\"小\",\"单\",\"双\"];\r\nfor(let i = 0 ; i<4 ; i++){\r\n  bsoe.push({\r\n    play:ebsoe[i],\r\n    checked:false,\r\n    oddsArr:[{id:\"\", odds: 0 }],\r\n  })\r\n}\r\nlet arr10=[]\r\nfor (let i =0 ; i<10 ; i++){\r\n  arr10.push(i)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default {\r\n  name: \"SSC\",\r\n  components: {\r\n    HistoricalboardComponent,\r\n    BettingFieldComponent,\r\n    GameChoiceComponent,\r\n    Option_slideComponent,\r\n    Special\r\n  },\r\n  data() {\r\n    return {\r\n      gameMenu: [\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"龙虎斗\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: dtt\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"百家乐\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification:[\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:[\r\n                    {\r\n                      play: \"闲对\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"PlayerPair\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"和\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"Tie\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"庄对\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"BankerPair\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"闲赢\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"PlayerWin\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"庄赢\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"BankerWin\", odds: 0 }],\r\n                    },\r\n                  ]\r\n                }\r\n              ]\r\n            },\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"全5中1\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:this.arrCreated(arr10,'All5in1_'),\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"万位\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:this.arrCreated(ebsoe,'Pos0-').concat(this.arrCreated(arr10,'Fixed-P')),\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"千位\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:this.arrCreated(ebsoe,'Pos1-').concat(this.arrCreated(arr10,'Fixed-P')),\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"百位\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:this.arrCreated(ebsoe,'Pos2-').concat(this.arrCreated(arr10,'Fixed-P')),\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"十位\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:this.arrCreated(ebsoe,'Pos3-').concat(this.arrCreated(arr10,'Fixed-P')),\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"个位\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:this.arrCreated(ebsoe,'Pos4-').concat(this.arrCreated(arr10,'Fixed-P')),\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"前三球\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:[\r\n                    {\r\n                      play: \"豹子\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"F3-S-Triple\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"顺子\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"F3-S-Straight\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"对子\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"F3-S-Double\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"半顺\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"F3-S-HalfStraight\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"杂六\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"F3-S-Mix\", odds: 0 }],\r\n                    },\r\n                  ]\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"后三球\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:[\r\n                    {\r\n                      play: \"豹子\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"L3-S-Triple\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"顺子\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"L3-S-Straight\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"对子\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"L3-S-Double\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"半顺\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"L3-S-HalfStraight\", odds: 0 }],\r\n                    },\r\n                    {\r\n                      play: \"杂六\",\r\n                      checked: false,\r\n                      oddsArr: [{ id: \"L3-S-Mix\", odds: 0 }],\r\n                    },\r\n                  ]\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          open: this.$route.params.id=='txffc'? false : true,\r\n          name: \"\",\r\n          sub: [\r\n            {\r\n              subName: \"总和\",\r\n              shortName: \"\",\r\n              gameDes:\"\",\r\n              classification: [\r\n                {\r\n                  classificationNum: \"\",\r\n                  classificationArr:this.arrCreated(ebsoe,\"Sum-\")\r\n              }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n      ],\r\n      offTitle: 0,\r\n      OffSubTitle: 0,\r\n      option_slide_idx: null,\r\n      payrate: { value: {} },\r\n      time: { value: \"\" },\r\n      barMax: 0, //--->子组件\r\n      rebatRate: 0, //与子组件双向绑定\r\n      forbet: [], //投注暂存\r\n      quantity: 0,\r\n      currentName: \"\", //购物车玩法显示\r\n      issueTrace: true, //是否可追号\r\n      shortName: [],\r\n      mask:true\r\n    };\r\n  },\r\n  mounted() {\r\n     window.scrollTo(0,0);\r\n    let t = this;\r\n    let gameCode = this.$route.params.id;    \r\n    this.setCookie('currentGameName',encodeURI(this.$route.meta.title),0.5) //safari 不支持存中文 要编码 \r\n    gamestatus(this, gameCode, function(res) {\r\n      if (Object.keys(res).length === 0) {\r\n        alert(\"维护中\");\r\n        t.$router.push({ path: \"/index\" });\r\n        return;\r\n      } //更新vuex 状态\r\n      t.$store.dispatch(\"updatebetGameCode\", gameCode);\r\n      _getbettime(t, gameCode, t.time); //盘口资料\r\n      _payRate(t, gameCode, \"2\", t.payrate); //赔率\r\n      \r\n    });\r\n  },\r\n  methods: {\r\n    //arrCreated\r\n    arrCreated: function(arr,id) {\r\n      let arrayReturn = [];\r\n      arr.forEach(function(item,index) {\r\n      if(isNaN(item)){ //大小单双\r\n        arrayReturn.push({\r\n          play: item,\r\n          checked: false,\r\n          oddsArr: [{ id: id + bsoe[index] , odds: 0 }],\r\n        });\r\n      }else{\r\n        if(id == \"Fixed-P\"){index = \"\"}\r\n        arrayReturn.push({\r\n          play: item,\r\n          checked: false,\r\n          oddsArr: [{ id: id + index , odds: 0 }],\r\n        });\r\n      }\r\n      });\r\n      return arrayReturn;\r\n    },\r\n    //   监听事件 : 监听玩法选择有无变动，若有则执行FN\r\n    clickOff: function(clickOffValue, clickSubValue) {\r\n      this.offTitle = clickOffValue;\r\n      this.OffSubTitle = clickSubValue;\r\n      this.currentName = this.gameMenu[clickOffValue].sub[clickSubValue].subName;\r\n    },\r\n    //监听如果开启选择玩法页面 就取消所有游戏选取\r\n    childByValue: function() {\r\n       this.gameMenu[this.offTitle].sub[this.OffSubTitle].classification.forEach(function(e){\r\n                e.classificationArr.forEach(function(i){\r\n                  i.checked=false\r\n                })\r\n            })\r\n      this.option_slide_idx = null;\r\n      this.quantity = 0;\r\n      this.forbet = []; //暂存清空\r\n      this.rebatRate = 0;\r\n    },\r\n    bundledatainit() {\r\n      //资料初始\r\n      let _t = this;\r\n\r\n      if (Object.keys(this.payrate.value).length > 0) {\r\n        this.gameMenu.forEach(function(v){\r\n            v.sub.forEach(function(v1){\r\n              v1.classification.forEach(function(v2){\r\n                v2.classificationArr.forEach(function(v3){\r\n                  _t.renderdata(v3.oddsArr);\r\n                })\r\n              })\r\n            })\r\n        });        \r\n      }\r\n      this.mask=false\r\n    },\r\n    renderdata(obj) {\r\n      //玩法阵列资料绑定\r\n      let _t = this;\r\n      obj.forEach(function(v) {\r\n        let _p = _t.payrate.value[v.id];\r\n        v.odds = calPayRate(_p, 0);\r\n        v.odds2 = calPayRate2(_p, 0);\r\n        v.playTypeS = _p.playTypeS;\r\n        v.playTypeM = _p.playTypeM;\r\n        _t.barMax = _p.rebatRate;\r\n      });\r\n    },\r\n    barrenderdata(obj) {\r\n      //拉动bar 玩法赔率变动\r\n      let _t = this;\r\n      obj.forEach(function(v) {\r\n        let _p = _t.payrate.value[v.id];\r\n        v.odds = calPayRate(_p, _t.rebatRate);\r\n        v.odds2 = calPayRate2(_p, _t.rebatRate);\r\n      });\r\n    },\r\n    //选取的号码\r\n    checkNum(Arr) {      \r\n      \r\n        let _t = this;\r\n            this.forbet = [];           \r\n\r\nArr.forEach(function(k){\r\nlet checkedArr = k.classificationArr.filter(function(v) {\r\n                return v.checked == true\r\n            })\r\n            checkedArr.forEach(function(e) {\r\n                let positions = ['', '', '', '', ''];\r\n                if (e.oddsArr[0].id == 'Fixed-P') {\r\n                  let positoinsindex;\r\n                  switch(_t.currentName){\r\n                    \r\n                    case '万位':{\r\n                      positoinsindex = 0\r\n                      break;\r\n                    }\r\n                    case '千位':{\r\n                      positoinsindex = 1\r\n                      break;\r\n                    }\r\n                    case '百位':{\r\n                      positoinsindex = 2\r\n                      break;\r\n                    }\r\n                    case '十位':{\r\n                      positoinsindex = 3\r\n                      break;\r\n                    }\r\n                    case '个位':{\r\n                      positoinsindex = 4\r\n                      break;\r\n                    }\r\n                    default :{\r\n                      console.error(\"error\");\r\n                    }\r\n                  }\r\n                    positions[positoinsindex] = e.play.toString()\r\n                }\r\n                let tplay = e.play \r\n                e =e.oddsArr[0]\r\n                _t.forbet.push({\r\n                    uid: randomRangeId(10),\r\n                    id: e.id,\r\n                    play: tplay,\r\n                    name: _t.currentName,\r\n                    betMainInfo: {\r\n                        playTypeM: e.playTypeM,\r\n                        playTypeS: e.playTypeS,\r\n                        positions: positions,\r\n                        quantity: 1,\r\n                        payRate: e.odds,\r\n                        payRate2: e.odds2,\r\n                        rebatRate: _t.rebatRate,\r\n                        unitPrice: 0\r\n                    }\r\n                });\r\n\r\n            })\r\n})\r\n      let Plus = 0;\r\n      this.forbet.forEach(function(v) {\r\n        Plus += v.betMainInfo.quantity;\r\n      });\r\n\r\n      this.quantity = Plus;\r\n    }\r\n  },\r\n  watch: {\r\n    payrate: {\r\n      deep: true,\r\n      handler() {\r\n        this.bundledatainit();\r\n      }\r\n    },\r\n    rebatRate(nv) {\r\n      let _t = this;\r\n      this.rebatRate = nv;\r\n      //画面、阵列更新\r\n      this.gameMenu[this.offTitle].sub[this.OffSubTitle].classification\r\n      .forEach(function(v){\r\n        v.classificationArr.forEach(function(va){\r\n          _t.barrenderdata(va.oddsArr)\r\n        })\r\n      });\r\n      //已选的下注 更新资料\r\n      if (this.forbet.length > 0) {\r\n        this.forbet.forEach(function(v) {\r\n          let _p = _t.payrate.value[v.id];\r\n          v.betMainInfo.payRate = calPayRate(_p, nv);\r\n          v.betMainInfo.payRate2 = calPayRate2(_p, nv);\r\n          v.betMainInfo.rebatRate = nv;\r\n        });\r\n      }\r\n    }\r\n  },\r\n  destroyed() {\r\n    const unWatch = this.$watch(\"payrate\");\r\n    unWatch(); // 手动注销watch\r\n    this.childByValue();\r\n    cleartimer()\r\n  },\r\n  computed: {\r\n     donotTouch() {\r\n            return this.$store.state.dontTouch;\r\n     }\r\n  }\r\n};\r\n</script>\r\n\r\n<style src=\"./SSC.css\" scoped>\r\n</style>\r\n"]}]}