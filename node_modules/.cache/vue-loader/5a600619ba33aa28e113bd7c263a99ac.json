{"remainingRequest":"E:\\lottery_mobile_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\lottery_mobile_vue\\src\\pages\\official\\low\\low.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\lottery_mobile_vue\\src\\pages\\official\\low\\low.vue","mtime":1556249286000},{"path":"E:\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\lottery_mobile_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\lottery_mobile_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n\r\nimport HistoricalboardComponent from \"@/components/games/historicalboard/Historicalboard.vue\";\r\nimport BettingFieldComponent from \"@/components/games/bettingFiled/BetttingField.vue\";\r\nimport { _getbettime, _payRate } from \"@/assets/src/forgame.js\";\r\n// 汇入选择游戏组件\r\nimport GameChoiceComponent from \"@/components/games/gameChoice/GameChoice.vue\";\r\nimport Option_slideComponent from \"@/components/games/option_slide/Option_slide.vue\";\r\n\r\nimport {\r\n    calPayRate,\r\n    calPayRate2,\r\n    combination,\r\n    uniquearr,\r\n    randomRangeId,\r\n    gamestatus,\r\n    cleartimer,\r\n    computeAllHeZhuCount,\r\n    computeZxHeZhu3Count,\r\n    computeZxHeZhu6Count\r\n} from \"@/assets/src/forgame\";\r\n\r\n//arr 28 0~27\r\nlet arr28 = [];\r\nfor (let i = 0; i < 28; i++) {\r\n    arr28.push(i);\r\n}\r\n//arr 28 1~26\r\nlet arr26 = [];\r\nfor (let i = 1; i < 27; i++) {\r\n    arr26.push(i);\r\n}\r\nlet arr24 = []\r\nfor (let i = 3; i < 25; i++) {\r\n    arr24.push(i)\r\n}\r\n\r\n//arr 10\r\nlet arr10 = [];\r\nfor (let i = 0; i < 10; i++) {\r\n    arr10.push(i);\r\n}\r\n\r\n//bsoe\r\nlet bsoe = [\"大\", \"小\", \"单\", \"双\"];\r\nlet ebsoe = ['B', 'S', 'O', 'E']\r\nexport default {\r\n    name: \"low\",\r\n    components: {\r\n        HistoricalboardComponent,\r\n        BettingFieldComponent,\r\n        GameChoiceComponent,\r\n        Option_slideComponent,\r\n    },\r\n    data() {\r\n        return {\r\n            objodds: { id: 'N3-P', odds: 0 },\r\n            gameMenu: [{\r\n                    name: \"3星\",\r\n                    sub: [{\r\n                            subName: \"三码复式\",\r\n                            shortName: \"N3-P\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从百位、十位、个位各选一个号码组成一注。\",\r\n                            classification: [{\r\n                                    classificationNum: \"百位\",\r\n                                    classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                                },\r\n                                {\r\n                                    classificationNum: \"十位\",\r\n                                    classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                                },\r\n                                {\r\n                                    classificationNum: \"个位\",\r\n                                    classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                                }\r\n                            ]\r\n                        },\r\n                        {\r\n                            subName: \"三码直选和值\",\r\n                            shortName: \"N3-P-Sum\",\r\n                            contentStyle: \"gameContent2\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从0-27中任意选择1个或1个以上号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"和值\",\r\n                                classificationArr: this.arrCreated(arr28),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        },\r\n                        {\r\n                            subName: \"三码组三\",\r\n                            shortName: \"N3-C3\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从0-9中任意选择2个或2个以上号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"组三\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        },\r\n                        {\r\n                            subName: \"三码组六\",\r\n                            shortName: \"N3-C6\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从0-9中任意选择3个或3个以上号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"组六\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        },\r\n                        {\r\n                            subName: \"三码组三和值\",\r\n                            shortName: \"N3-C3-Sum\",\r\n                            contentStyle: \"gameContent2\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从1-26中选择1个号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"和值\",\r\n                                classificationArr: this.arrCreated(arr26),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        },\r\n                        {\r\n                            subName: \"三码组六和值\",\r\n                            shortName: \"N3-C6-Sum\",\r\n                            contentStyle: \"gameContent2\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从3-24中选择1个号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"和值\",\r\n                                classificationArr: this.arrCreated(arr24),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    name: \"2星\",\r\n                    sub: [{\r\n                            subName: \"前二直选\",\r\n                            shortName: \"N2-F2-P\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从百位、十位中至少各选1个号码组成一注。\",\r\n                            classification: [{\r\n                                    classificationNum: \"百位\",\r\n                                    classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                                },\r\n                                {\r\n                                    classificationNum: \"十位\",\r\n                                    classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                                }\r\n\r\n                            ]\r\n                        },\r\n                        {\r\n                            subName: \"后二直选\",\r\n                            shortName: \"N2-L2-P\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从十位、个位中至少各选1个号码组成一注。\",\r\n                            classification: [{\r\n                                    classificationNum: \"十位\",\r\n                                    classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                                },\r\n                                {\r\n                                    classificationNum: \"个位\",\r\n                                    classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                                }\r\n                            ]\r\n                        },\r\n                        {\r\n                            subName: \"前二组选\",\r\n                            shortName: \"N2-F2-C\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从0-9中任意选择2个或2个以上号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"前二\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        },\r\n                        {\r\n                            subName: \"后二组选\",\r\n                            shortName: \"N2-L2-C\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从0-9中任意选择2个或2个以上号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"后二\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    name: \"定位胆\",\r\n                    sub: [{\r\n                        subName: \"定位胆\",\r\n                        shortName: \"Fixed-P\",\r\n                        optionSlide: true,\r\n                        gameDes: \"在百位、十位、个位任意位置上任意选择1个或1个以上号码。\",\r\n                        classification: [{\r\n                                classificationNum: \"百位\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            },\r\n                            {\r\n                                classificationNum: \"十位\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            },\r\n                            {\r\n                                classificationNum: \"个位\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            }\r\n                        ]\r\n                    }]\r\n                },\r\n                {\r\n                    name: \"不定位\",\r\n                    sub: [{\r\n                            subName: \"一码不定位\",\r\n                            shortName: \"Unfixed-N1\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从0-9中任意选择1个以上号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"一码\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        },\r\n                        {\r\n                            subName: \"二码不定位\",\r\n                            shortName: \"Unfixed-N2\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从0-9中任意选择2个以上号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"二码\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    name: \"大小单双\",\r\n                    sub: [{\r\n                            subName: \"前二大小单双\",\r\n                            shortName: \"BSOE-F2\",\r\n                            optionSlide: false,\r\n                            gameDes: \"从百位、十位中的“大、小、单、双”中至少各选一个组成一注。\",\r\n                            classification: [{\r\n                                    classificationNum: \"百位\",\r\n                                    classificationArr: this.arrCreated(bsoe),\r\n                                    option_slide_idx: null\r\n                                },\r\n                                {\r\n                                    classificationNum: \"十位\",\r\n                                    classificationArr: this.arrCreated(bsoe),\r\n                                    option_slide_idx: null\r\n                                }\r\n                            ]\r\n                        },\r\n                        {\r\n                            subName: \"后二大小单双\",\r\n                            shortName: \"BSOE-L2\",\r\n                            optionSlide: false,\r\n                            gameDes: \"从十位、个位中的“大、小、单、双”中至少各选一个组成一注。\",\r\n                            classification: [{\r\n                                    classificationNum: \"十位\",\r\n                                    classificationArr: this.arrCreated(bsoe),\r\n                                    option_slide_idx: null\r\n                                },\r\n                                {\r\n                                    classificationNum: \"个位\",\r\n                                    classificationArr: this.arrCreated(bsoe),\r\n                                    option_slide_idx: null\r\n                                }\r\n                            ]\r\n                        }\r\n                    ]\r\n                }\r\n\r\n            ],\r\n\r\n            offTitle: 0,\r\n            OffSubTitle: 0,\r\n            option_slide_idx: null,\r\n            payrate: { value: {} },\r\n            time: { value: \"\" },\r\n            barMax: 0, //--->子组件\r\n            rebatRate: 0, //与子组件双向绑定\r\n            forbet: [], //投注暂存\r\n            quantity: 0,\r\n            currentName: \"\", //购物车玩法显示\r\n            issueTrace: false, //是否可追号\r\n            shortName: [],\r\n            mask:true\r\n        };\r\n    },\r\n    mounted() {\r\n        window.scrollTo(0, 0);\r\n        let t = this;\r\n        let gameCode = this.$route.params.id;\r\n        this.setCookie('currentGameName', encodeURI(this.$route.meta.title), 0.5) //safari 不支持存中文 要编码 \r\n\r\n        gamestatus(this, gameCode, function(res) {\r\n            if (Object.keys(res).length === 0) {\r\n                alert(\"维护中\");\r\n                t.$router.push({ path: \"/index\" });\r\n                return;\r\n            } //更新vuex 状态\r\n            t.$store.dispatch(\"updatebetGameCode\", gameCode);\r\n            _getbettime(t, gameCode, t.time); //盘口资料\r\n            _payRate(t, gameCode, \"1\", t.payrate); //赔率\r\n\r\n        });\r\n    },\r\n    methods: {\r\n        //arrCreated\r\n        arrCreated: function(arr) {\r\n            let arrayReturn = [];\r\n            arr.forEach(function(item) {\r\n                arrayReturn.push({\r\n                    play: item,\r\n                    checked: false\r\n                });\r\n            });\r\n            return arrayReturn;\r\n        },\r\n        //   监听事件 : 监听玩法选择有无变动，若有则执行FN\r\n        clickOff: function(clickOffValue, clickSubValue) {\r\n            this.offTitle = clickOffValue;\r\n            this.OffSubTitle = clickSubValue;\r\n            this.currentName = this.gameMenu[clickOffValue].sub[clickSubValue].subName;\r\n        },\r\n\r\n        //监听如果开启选择玩法页面 就取消所有游戏选取\r\n        childByValue: function() {\r\n            this.gameMenu[this.offTitle].sub[this.OffSubTitle].classification.forEach(function(e) {\r\n                e.option_slide_idx =null\r\n                e.classificationArr.forEach(function(i) {\r\n                    i.checked = false\r\n                })\r\n            })\r\n\r\n            this.option_slide_idx = null;\r\n            this.quantity = 0;\r\n            this.forbet = []; //暂存清空\r\n            this.rebatRate = 0;\r\n        },\r\n        bundledatainit() {\r\n            //资料初始\r\n            let _t = this;\r\n            if (Object.keys(this.payrate.value).length > 0) {\r\n                _t.renderdata(this.objodds);\r\n            }\r\n            this.mask=false\r\n        },\r\n        renderdata(obj) {\r\n            //玩法阵列资料绑定\r\n            let _t = this;\r\n            let _p = _t.payrate.value[obj.id];\r\n            obj.odds = calPayRate(_p, 0);\r\n            obj.odds2 = calPayRate2(_p, 0);\r\n            obj.playTypeS = _p.playTypeS;\r\n            obj.playTypeM = _p.playTypeM;\r\n            _t.barMax = _p.rebatRate;\r\n\r\n        },\r\n        barrenderdata(obj) {\r\n            //拉动bar 玩法赔率变动           \r\n            let _p = this.payrate.value[obj.id];\r\n            obj.odds = calPayRate(_p, this.rebatRate);\r\n            obj.odds2 = calPayRate2(_p, this.rebatRate);\r\n\r\n        },\r\n        getQuantity(e, pos) {\r\n            switch (e.playTypeS) {\r\n                case 173:\r\n                    return pos[0].length * pos[1].length * pos[2].length\r\n                case 175:\r\n                    {\r\n                        let count = 0\r\n                        let c = computeAllHeZhuCount(3)\r\n                        pos[0].forEach(function(v, i) {\r\n                            count += c[v];\r\n                        })\r\n                        return count;\r\n                    }\r\n                case 176:\r\n                    return combination(pos[0].length, 2) * 2\r\n                case 177:\r\n                    return combination(pos[0].length, 3)\r\n                case 178:\r\n                    {\r\n                        let count = 0\r\n                        let c = computeZxHeZhu3Count();\r\n                        pos[0].forEach(function(v, i) {\r\n                            count += c[v];\r\n                        })\r\n                        return count\r\n                    }\r\n                case 179:\r\n                    {\r\n                        let count = 0\r\n                        let c = computeZxHeZhu6Count();\r\n                        pos[0].forEach(function(v, i) {\r\n                            count += c[v];\r\n                        })\r\n                        return count\r\n                    }\r\n                case 180:\r\n                case 181:\r\n                case 187:\r\n                case 188:\r\n                    return pos[0].length * pos[1].length;\r\n                case 182:\r\n                case 183:\r\n                case 186:\r\n                    return combination(pos[0].length, 2)\r\n                case 184:\r\n                case 185:\r\n                    {\r\n                        let count = 0\r\n                        for (var i = 0; i < pos.length; i++) {\r\n                            count += pos[i].length;\r\n                        }\r\n                        return count\r\n                    }\r\n            }\r\n        },\r\n        //选取的号码\r\n        checkNum(Arr) {\r\n            let _t = this;\r\n            let offtitle = this.offTitle;\r\n            let OffSubTitle = this.OffSubTitle;\r\n            this.forbet = [];\r\n\r\n            let positions = ['', '', ''];\r\n            let pos = [],\r\n                cnpos = []\r\n            let tplay = '';\r\n            let g = this.gameMenu[this.offTitle].sub[this.OffSubTitle].classification\r\n            for (let i = 0; i < g.length; i++) {\r\n                let check = g[i].classificationArr.map(function(v) { if (v.checked) return v.play })\r\n\r\n                if (this.offTitle == 4) { //大小单双  \r\n                    cnpos[i] = check.filter(function(v) { return v != undefined }); //中文\r\n                    for (let index = 0; index < check.length; index++) {\r\n                        if (check[index] != undefined) check[index] = ebsoe[index] //中文置换代号\r\n                    }                    \r\n                }                \r\n\r\n                pos[i] = check.filter(function(v) { return v != undefined });\r\n                if (pos[i].length > 0) {\r\n                    if (this.offTitle == 4)\r\n                        tplay += g[i].classificationNum + ':' + cnpos[i].toString() + ' ';\r\n                    else\r\n                        tplay += g[i].classificationNum + ':' + pos[i].toString() + ' ';\r\n                }\r\n\r\n                if(g[i].option_slide_idx==5&& pos[i].length>0){\r\n                    g[i].option_slide_idx=null\r\n                }\r\n            }\r\n\r\n            let e = this.objodds\r\n            let q = this.getQuantity(e, pos)\r\n\r\n            pos.forEach(function(v, i) {\r\n                positions[i] = v.toString()\r\n            })\r\n            \r\n            if (q > 0) {\r\n                _t.forbet.push({\r\n                    uid: randomRangeId(10),\r\n                    id: e.id,\r\n                    play: tplay,\r\n                    name: _t.currentName,\r\n                    betMainInfo: {\r\n                        playTypeM: e.playTypeM,\r\n                        playTypeS: e.playTypeS,\r\n                        positions: positions,\r\n                        quantity: q,\r\n                        payRate: e.odds,\r\n                        payRate2: e.odds2,\r\n                        rebatRate: _t.rebatRate,\r\n                        unitPrice: 0\r\n                    }\r\n                });\r\n            }\r\n\r\n\r\n            let Plus = 0;\r\n            this.forbet.forEach(function(v, i) {\r\n                Plus += v.betMainInfo.quantity;\r\n            });\r\n\r\n            this.quantity = Plus;\r\n        }\r\n    },\r\n    watch: {\r\n        payrate: {\r\n            deep: true,\r\n            handler(nv, ov) {\r\n                this.bundledatainit();\r\n            }\r\n        },\r\n\r\n        offTitle: function() {\r\n            this.objodds = { id: this.gameMenu[this.offTitle].sub[this.OffSubTitle].shortName, odds: 0 }\r\n            this.renderdata(this.objodds);\r\n        },\r\n\r\n        OffSubTitle: function() {\r\n            this.objodds = { id: this.gameMenu[this.offTitle].sub[this.OffSubTitle].shortName, odds: 0 }\r\n            this.renderdata(this.objodds);\r\n        },\r\n        rebatRate(nv, ov) {\r\n            let _t = this;\r\n            this.rebatRate = nv;\r\n\r\n            //画面、阵列更新\r\n            this.barrenderdata(this.objodds);\r\n\r\n            //已选的下注 更新资料\r\n            if (this.forbet.length > 0) {\r\n                this.forbet.forEach(function(v, i) {\r\n                    let _p = _t.payrate.value[v.id];\r\n                    v.betMainInfo.payRate = calPayRate(_p, nv);\r\n                    v.betMainInfo.payRate2 = calPayRate2(_p, nv);\r\n                    v.betMainInfo.rebatRate = nv;\r\n                });\r\n            }\r\n        }\r\n    },\r\n    destroyed() {\r\n        const unWatch = this.$watch(\"payrate\");\r\n        unWatch(); // 手动注销watch\r\n        this.childByValue();\r\n        cleartimer()\r\n    },\r\n    computed: {\r\n        donotTouch() {\r\n            return this.$store.state.dontTouch;\r\n        }\r\n    }\r\n};\r\n",{"version":3,"sources":["low.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"low.vue","sourceRoot":"src/pages/official/low","sourcesContent":["<template src=\"./low.html\">\r\n    \r\n</template>\r\n\r\n<script>\r\nimport HistoricalboardComponent from \"@/components/games/historicalboard/Historicalboard.vue\";\r\nimport BettingFieldComponent from \"@/components/games/bettingFiled/BetttingField.vue\";\r\nimport { _getbettime, _payRate } from \"@/assets/src/forgame.js\";\r\n// 汇入选择游戏组件\r\nimport GameChoiceComponent from \"@/components/games/gameChoice/GameChoice.vue\";\r\nimport Option_slideComponent from \"@/components/games/option_slide/Option_slide.vue\";\r\n\r\nimport {\r\n    calPayRate,\r\n    calPayRate2,\r\n    combination,\r\n    uniquearr,\r\n    randomRangeId,\r\n    gamestatus,\r\n    cleartimer,\r\n    computeAllHeZhuCount,\r\n    computeZxHeZhu3Count,\r\n    computeZxHeZhu6Count\r\n} from \"@/assets/src/forgame\";\r\n\r\n//arr 28 0~27\r\nlet arr28 = [];\r\nfor (let i = 0; i < 28; i++) {\r\n    arr28.push(i);\r\n}\r\n//arr 28 1~26\r\nlet arr26 = [];\r\nfor (let i = 1; i < 27; i++) {\r\n    arr26.push(i);\r\n}\r\nlet arr24 = []\r\nfor (let i = 3; i < 25; i++) {\r\n    arr24.push(i)\r\n}\r\n\r\n//arr 10\r\nlet arr10 = [];\r\nfor (let i = 0; i < 10; i++) {\r\n    arr10.push(i);\r\n}\r\n\r\n//bsoe\r\nlet bsoe = [\"大\", \"小\", \"单\", \"双\"];\r\nlet ebsoe = ['B', 'S', 'O', 'E']\r\nexport default {\r\n    name: \"low\",\r\n    components: {\r\n        HistoricalboardComponent,\r\n        BettingFieldComponent,\r\n        GameChoiceComponent,\r\n        Option_slideComponent,\r\n    },\r\n    data() {\r\n        return {\r\n            objodds: { id: 'N3-P', odds: 0 },\r\n            gameMenu: [{\r\n                    name: \"3星\",\r\n                    sub: [{\r\n                            subName: \"三码复式\",\r\n                            shortName: \"N3-P\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从百位、十位、个位各选一个号码组成一注。\",\r\n                            classification: [{\r\n                                    classificationNum: \"百位\",\r\n                                    classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                                },\r\n                                {\r\n                                    classificationNum: \"十位\",\r\n                                    classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                                },\r\n                                {\r\n                                    classificationNum: \"个位\",\r\n                                    classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                                }\r\n                            ]\r\n                        },\r\n                        {\r\n                            subName: \"三码直选和值\",\r\n                            shortName: \"N3-P-Sum\",\r\n                            contentStyle: \"gameContent2\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从0-27中任意选择1个或1个以上号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"和值\",\r\n                                classificationArr: this.arrCreated(arr28),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        },\r\n                        {\r\n                            subName: \"三码组三\",\r\n                            shortName: \"N3-C3\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从0-9中任意选择2个或2个以上号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"组三\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        },\r\n                        {\r\n                            subName: \"三码组六\",\r\n                            shortName: \"N3-C6\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从0-9中任意选择3个或3个以上号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"组六\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        },\r\n                        {\r\n                            subName: \"三码组三和值\",\r\n                            shortName: \"N3-C3-Sum\",\r\n                            contentStyle: \"gameContent2\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从1-26中选择1个号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"和值\",\r\n                                classificationArr: this.arrCreated(arr26),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        },\r\n                        {\r\n                            subName: \"三码组六和值\",\r\n                            shortName: \"N3-C6-Sum\",\r\n                            contentStyle: \"gameContent2\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从3-24中选择1个号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"和值\",\r\n                                classificationArr: this.arrCreated(arr24),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    name: \"2星\",\r\n                    sub: [{\r\n                            subName: \"前二直选\",\r\n                            shortName: \"N2-F2-P\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从百位、十位中至少各选1个号码组成一注。\",\r\n                            classification: [{\r\n                                    classificationNum: \"百位\",\r\n                                    classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                                },\r\n                                {\r\n                                    classificationNum: \"十位\",\r\n                                    classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                                }\r\n\r\n                            ]\r\n                        },\r\n                        {\r\n                            subName: \"后二直选\",\r\n                            shortName: \"N2-L2-P\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从十位、个位中至少各选1个号码组成一注。\",\r\n                            classification: [{\r\n                                    classificationNum: \"十位\",\r\n                                    classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                                },\r\n                                {\r\n                                    classificationNum: \"个位\",\r\n                                    classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                                }\r\n                            ]\r\n                        },\r\n                        {\r\n                            subName: \"前二组选\",\r\n                            shortName: \"N2-F2-C\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从0-9中任意选择2个或2个以上号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"前二\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        },\r\n                        {\r\n                            subName: \"后二组选\",\r\n                            shortName: \"N2-L2-C\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从0-9中任意选择2个或2个以上号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"后二\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    name: \"定位胆\",\r\n                    sub: [{\r\n                        subName: \"定位胆\",\r\n                        shortName: \"Fixed-P\",\r\n                        optionSlide: true,\r\n                        gameDes: \"在百位、十位、个位任意位置上任意选择1个或1个以上号码。\",\r\n                        classification: [{\r\n                                classificationNum: \"百位\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            },\r\n                            {\r\n                                classificationNum: \"十位\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            },\r\n                            {\r\n                                classificationNum: \"个位\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            }\r\n                        ]\r\n                    }]\r\n                },\r\n                {\r\n                    name: \"不定位\",\r\n                    sub: [{\r\n                            subName: \"一码不定位\",\r\n                            shortName: \"Unfixed-N1\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从0-9中任意选择1个以上号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"一码\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        },\r\n                        {\r\n                            subName: \"二码不定位\",\r\n                            shortName: \"Unfixed-N2\",\r\n                            optionSlide: true,\r\n                            gameDes: \"从0-9中任意选择2个以上号码。\",\r\n                            classification: [{\r\n                                classificationNum: \"二码\",\r\n                                classificationArr: this.arrCreated(arr10),\r\n                                    option_slide_idx: null\r\n                            }]\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    name: \"大小单双\",\r\n                    sub: [{\r\n                            subName: \"前二大小单双\",\r\n                            shortName: \"BSOE-F2\",\r\n                            optionSlide: false,\r\n                            gameDes: \"从百位、十位中的“大、小、单、双”中至少各选一个组成一注。\",\r\n                            classification: [{\r\n                                    classificationNum: \"百位\",\r\n                                    classificationArr: this.arrCreated(bsoe),\r\n                                    option_slide_idx: null\r\n                                },\r\n                                {\r\n                                    classificationNum: \"十位\",\r\n                                    classificationArr: this.arrCreated(bsoe),\r\n                                    option_slide_idx: null\r\n                                }\r\n                            ]\r\n                        },\r\n                        {\r\n                            subName: \"后二大小单双\",\r\n                            shortName: \"BSOE-L2\",\r\n                            optionSlide: false,\r\n                            gameDes: \"从十位、个位中的“大、小、单、双”中至少各选一个组成一注。\",\r\n                            classification: [{\r\n                                    classificationNum: \"十位\",\r\n                                    classificationArr: this.arrCreated(bsoe),\r\n                                    option_slide_idx: null\r\n                                },\r\n                                {\r\n                                    classificationNum: \"个位\",\r\n                                    classificationArr: this.arrCreated(bsoe),\r\n                                    option_slide_idx: null\r\n                                }\r\n                            ]\r\n                        }\r\n                    ]\r\n                }\r\n\r\n            ],\r\n\r\n            offTitle: 0,\r\n            OffSubTitle: 0,\r\n            option_slide_idx: null,\r\n            payrate: { value: {} },\r\n            time: { value: \"\" },\r\n            barMax: 0, //--->子组件\r\n            rebatRate: 0, //与子组件双向绑定\r\n            forbet: [], //投注暂存\r\n            quantity: 0,\r\n            currentName: \"\", //购物车玩法显示\r\n            issueTrace: false, //是否可追号\r\n            shortName: [],\r\n            mask:true\r\n        };\r\n    },\r\n    mounted() {\r\n        window.scrollTo(0, 0);\r\n        let t = this;\r\n        let gameCode = this.$route.params.id;\r\n        this.setCookie('currentGameName', encodeURI(this.$route.meta.title), 0.5) //safari 不支持存中文 要编码 \r\n\r\n        gamestatus(this, gameCode, function(res) {\r\n            if (Object.keys(res).length === 0) {\r\n                alert(\"维护中\");\r\n                t.$router.push({ path: \"/index\" });\r\n                return;\r\n            } //更新vuex 状态\r\n            t.$store.dispatch(\"updatebetGameCode\", gameCode);\r\n            _getbettime(t, gameCode, t.time); //盘口资料\r\n            _payRate(t, gameCode, \"1\", t.payrate); //赔率\r\n\r\n        });\r\n    },\r\n    methods: {\r\n        //arrCreated\r\n        arrCreated: function(arr) {\r\n            let arrayReturn = [];\r\n            arr.forEach(function(item) {\r\n                arrayReturn.push({\r\n                    play: item,\r\n                    checked: false\r\n                });\r\n            });\r\n            return arrayReturn;\r\n        },\r\n        //   监听事件 : 监听玩法选择有无变动，若有则执行FN\r\n        clickOff: function(clickOffValue, clickSubValue) {\r\n            this.offTitle = clickOffValue;\r\n            this.OffSubTitle = clickSubValue;\r\n            this.currentName = this.gameMenu[clickOffValue].sub[clickSubValue].subName;\r\n        },\r\n\r\n        //监听如果开启选择玩法页面 就取消所有游戏选取\r\n        childByValue: function() {\r\n            this.gameMenu[this.offTitle].sub[this.OffSubTitle].classification.forEach(function(e) {\r\n                e.option_slide_idx =null\r\n                e.classificationArr.forEach(function(i) {\r\n                    i.checked = false\r\n                })\r\n            })\r\n\r\n            this.option_slide_idx = null;\r\n            this.quantity = 0;\r\n            this.forbet = []; //暂存清空\r\n            this.rebatRate = 0;\r\n        },\r\n        bundledatainit() {\r\n            //资料初始\r\n            let _t = this;\r\n            if (Object.keys(this.payrate.value).length > 0) {\r\n                _t.renderdata(this.objodds);\r\n            }\r\n            this.mask=false\r\n        },\r\n        renderdata(obj) {\r\n            //玩法阵列资料绑定\r\n            let _t = this;\r\n            let _p = _t.payrate.value[obj.id];\r\n            obj.odds = calPayRate(_p, 0);\r\n            obj.odds2 = calPayRate2(_p, 0);\r\n            obj.playTypeS = _p.playTypeS;\r\n            obj.playTypeM = _p.playTypeM;\r\n            _t.barMax = _p.rebatRate;\r\n\r\n        },\r\n        barrenderdata(obj) {\r\n            //拉动bar 玩法赔率变动           \r\n            let _p = this.payrate.value[obj.id];\r\n            obj.odds = calPayRate(_p, this.rebatRate);\r\n            obj.odds2 = calPayRate2(_p, this.rebatRate);\r\n\r\n        },\r\n        getQuantity(e, pos) {\r\n            switch (e.playTypeS) {\r\n                case 173:\r\n                    return pos[0].length * pos[1].length * pos[2].length\r\n                case 175:\r\n                    {\r\n                        let count = 0\r\n                        let c = computeAllHeZhuCount(3)\r\n                        pos[0].forEach(function(v, i) {\r\n                            count += c[v];\r\n                        })\r\n                        return count;\r\n                    }\r\n                case 176:\r\n                    return combination(pos[0].length, 2) * 2\r\n                case 177:\r\n                    return combination(pos[0].length, 3)\r\n                case 178:\r\n                    {\r\n                        let count = 0\r\n                        let c = computeZxHeZhu3Count();\r\n                        pos[0].forEach(function(v, i) {\r\n                            count += c[v];\r\n                        })\r\n                        return count\r\n                    }\r\n                case 179:\r\n                    {\r\n                        let count = 0\r\n                        let c = computeZxHeZhu6Count();\r\n                        pos[0].forEach(function(v, i) {\r\n                            count += c[v];\r\n                        })\r\n                        return count\r\n                    }\r\n                case 180:\r\n                case 181:\r\n                case 187:\r\n                case 188:\r\n                    return pos[0].length * pos[1].length;\r\n                case 182:\r\n                case 183:\r\n                case 186:\r\n                    return combination(pos[0].length, 2)\r\n                case 184:\r\n                case 185:\r\n                    {\r\n                        let count = 0\r\n                        for (var i = 0; i < pos.length; i++) {\r\n                            count += pos[i].length;\r\n                        }\r\n                        return count\r\n                    }\r\n            }\r\n        },\r\n        //选取的号码\r\n        checkNum(Arr) {\r\n            let _t = this;\r\n            let offtitle = this.offTitle;\r\n            let OffSubTitle = this.OffSubTitle;\r\n            this.forbet = [];\r\n\r\n            let positions = ['', '', ''];\r\n            let pos = [],\r\n                cnpos = []\r\n            let tplay = '';\r\n            let g = this.gameMenu[this.offTitle].sub[this.OffSubTitle].classification\r\n            for (let i = 0; i < g.length; i++) {\r\n                let check = g[i].classificationArr.map(function(v) { if (v.checked) return v.play })\r\n\r\n                if (this.offTitle == 4) { //大小单双  \r\n                    cnpos[i] = check.filter(function(v) { return v != undefined }); //中文\r\n                    for (let index = 0; index < check.length; index++) {\r\n                        if (check[index] != undefined) check[index] = ebsoe[index] //中文置换代号\r\n                    }                    \r\n                }                \r\n\r\n                pos[i] = check.filter(function(v) { return v != undefined });\r\n                if (pos[i].length > 0) {\r\n                    if (this.offTitle == 4)\r\n                        tplay += g[i].classificationNum + ':' + cnpos[i].toString() + ' ';\r\n                    else\r\n                        tplay += g[i].classificationNum + ':' + pos[i].toString() + ' ';\r\n                }\r\n\r\n                if(g[i].option_slide_idx==5&& pos[i].length>0){\r\n                    g[i].option_slide_idx=null\r\n                }\r\n            }\r\n\r\n            let e = this.objodds\r\n            let q = this.getQuantity(e, pos)\r\n\r\n            pos.forEach(function(v, i) {\r\n                positions[i] = v.toString()\r\n            })\r\n            \r\n            if (q > 0) {\r\n                _t.forbet.push({\r\n                    uid: randomRangeId(10),\r\n                    id: e.id,\r\n                    play: tplay,\r\n                    name: _t.currentName,\r\n                    betMainInfo: {\r\n                        playTypeM: e.playTypeM,\r\n                        playTypeS: e.playTypeS,\r\n                        positions: positions,\r\n                        quantity: q,\r\n                        payRate: e.odds,\r\n                        payRate2: e.odds2,\r\n                        rebatRate: _t.rebatRate,\r\n                        unitPrice: 0\r\n                    }\r\n                });\r\n            }\r\n\r\n\r\n            let Plus = 0;\r\n            this.forbet.forEach(function(v, i) {\r\n                Plus += v.betMainInfo.quantity;\r\n            });\r\n\r\n            this.quantity = Plus;\r\n        }\r\n    },\r\n    watch: {\r\n        payrate: {\r\n            deep: true,\r\n            handler(nv, ov) {\r\n                this.bundledatainit();\r\n            }\r\n        },\r\n\r\n        offTitle: function() {\r\n            this.objodds = { id: this.gameMenu[this.offTitle].sub[this.OffSubTitle].shortName, odds: 0 }\r\n            this.renderdata(this.objodds);\r\n        },\r\n\r\n        OffSubTitle: function() {\r\n            this.objodds = { id: this.gameMenu[this.offTitle].sub[this.OffSubTitle].shortName, odds: 0 }\r\n            this.renderdata(this.objodds);\r\n        },\r\n        rebatRate(nv, ov) {\r\n            let _t = this;\r\n            this.rebatRate = nv;\r\n\r\n            //画面、阵列更新\r\n            this.barrenderdata(this.objodds);\r\n\r\n            //已选的下注 更新资料\r\n            if (this.forbet.length > 0) {\r\n                this.forbet.forEach(function(v, i) {\r\n                    let _p = _t.payrate.value[v.id];\r\n                    v.betMainInfo.payRate = calPayRate(_p, nv);\r\n                    v.betMainInfo.payRate2 = calPayRate2(_p, nv);\r\n                    v.betMainInfo.rebatRate = nv;\r\n                });\r\n            }\r\n        }\r\n    },\r\n    destroyed() {\r\n        const unWatch = this.$watch(\"payrate\");\r\n        unWatch(); // 手动注销watch\r\n        this.childByValue();\r\n        cleartimer()\r\n    },\r\n    computed: {\r\n        donotTouch() {\r\n            return this.$store.state.dontTouch;\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style src=\"./low.css\" scoped>\r\n\r\n</style>\r\n"]}]}