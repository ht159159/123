{"remainingRequest":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\westlottery\\lottery_mobile_vue\\src\\components\\Marquee.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\src\\components\\Marquee.vue","mtime":1555490559731},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n\nexport default {\n  data() {\n    return {\n      current: -1,\n      // ul样式\n      stylesWrap: {\n        width: this.width,\n        height: this.height\n      },\n      // li样式\n      stylesItem: {\n        height: this.height,\n        lineHeight: this.height,\n        color: this.color,\n        fontSize: this.fontSize\n      },\n      scrollHeight: 0,\n      showing: false,\n      paused: false\n    };\n  },\n  props: {\n    // 宽度\n    width: {\n      type: String,\n      default: '200px'\n    },\n    // 高度\n    height: {\n      type: String,\n      default: '38px'\n    },\n    // 字体颜色\n    color: {\n      type: String,\n      default: '#fff'\n    },\n    // 字体大小\n    fontSize: {\n      type: String,\n      default: '12px'\n    },\n    // 下拉速度\n    showSpeed: {\n      type: Number,\n      validator(val) {\n        return /^\\d+$/.test(val);\n      },\n      default: 15\n    },\n    // 切换间隔时间(ms)\n    pauseTime: {\n      type: Number,\n      validator(val) {\n        return /^\\d+$/.test(val);\n      },\n      default: 2500\n    },\n    // 滚动速度\n    scrollSpeed: {\n      type: Number,\n      validator(val) {\n        return /^\\d+$/.test(val);\n      },\n      default: 22\n    },\n    // 悬停时暂停\n    pauseOnHover: {\n      type: Boolean,\n      default: false\n    },\n    // 内容\n    marqueeList: {\n      type: Array,\n      default: function() {\n        return [];\n      }\n    }\n  },\n  mounted() {\n    if (this.marqueeList.length > 0) {\n      this.init();\n    }\n  },\n  methods: {\n    init() {\n      this.mqLength = this.marqueeList.length;\n      this.scrollHeight = this.height.replace(/[^0-9]/gi, '');\n      this.$nextTick(() => {\n        this.showNext();\n      });\n    },\n    mouseEnter() {\n      if (!this.pauseOnHover === true) return false;\n\n      this.pause();\n    },\n    mouseLeave() {\n      if (!this.pauseOnHover === true) return false;\n\n      this.resume();\n    },\n    pause() {\n      this.paused = true;\n\n      if (this.showing !== true) {\n        let li = this.$refs.li[this.current];\n        clearInterval(li.timer);\n      }\n    },\n    resume() {\n      this.paused = false;\n\n      if (this.showing !== true) {\n        let li = this.$refs.li[this.current];\n        this.scroll(li, 1);\n      }\n    },\n    showNext() {\n      this.current++;\n\n      if (this.current >= this.mqLength) {\n        this.current = 0;\n      }\n\n      this.show(this.current);\n    },\n    show(i) {\n      for (let item of this.$refs.li) {\n        if (hasClass(item, 'active')) {\n          return false;\n        }\n      }\n\n      let li = this.$refs.li[i];\n\n      // 调整至可见区域顶部\n      li.style.left = '0px';\n      li.style.top = -this.scrollHeight + 'px';\n\n      addClass(li, 'active');\n\n      this.showing = true;\n      //下移至可见区域\n      animate(li, { top: 0 }, this.showSpeed, 0.01, () => {\n        this.showing = false;\n        this.scroll(li);\n      });\n    },\n    scroll(li, delay) {\n      if (this.paused === true) return false;\n\n      if (li.scrollWidth > li.clientWidth) {\n        // 左移\n        setTimeout(() => {\n          if (this.paused === true) return false;\n\n          animate(li, { left: -li.scrollWidth }, this.scrollSpeed, 1, () => {\n            this.finish(li);\n          });\n        }, delay || 1000);\n      } else {\n        setTimeout(() => {\n          // 下移动至底部不可见区域\n          if (this.paused === true) return false;\n\n          animate(li, { top: this.scrollHeight }, this.showSpeed, 0.01);\n          this.finish(li);\n        }, delay || this.pauseTime);\n      }\n    },\n    finish(li) {\n      removeClass(li, 'active');\n\n      this.showNext();\n    }\n  },\n  beforeDestroy() {\n    this.pause();\n\n    this.current = -1;\n  },\n  watch: {\n    marqueeList(val) {\n      if (val.length > 0) {\n        this.init();\n      }\n    }\n  }\n};\n\nfunction animate(obj, json, interval, sp, fn) {\n  clearInterval(obj.timer);\n  obj.timer = setInterval(() => {\n    var flag = true;\n    for (var arr in json) {\n      var icur = 0;\n      if (arr == 'opacity') {\n        icur = Math.round(parseFloat(getStyle(obj, arr)) * 100);\n      } else {\n        icur = parseInt(getStyle(obj, arr));\n      }\n      var speed;\n      if (sp == 1) {\n        // 匀速\n        speed = 0;\n        if (json[arr] < 0) {\n          speed--;\n        } else {\n          speed++;\n        }\n      } else {\n        // 缓冲效果\n        speed = (json[arr] - icur) * sp;\n        speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);\n      }\n\n      if (icur != json[arr]) {\n        flag = false;\n      }\n      if (arr == 'opacity') {\n        obj.style.filter = 'alpha(opacity : ' + (icur + speed) + ')';\n        obj.style.opacity = (icur + speed) / 100;\n      } else {\n        obj.style[arr] = icur + speed + 'px';\n      }\n    }\n\n    if (flag) {\n      clearInterval(obj.timer);\n      if (fn) {\n        fn();\n      }\n    }\n  }, interval);\n}\n\n// 获取样式\nfunction getStyle(obj, name) {\n  if (obj.currentStyle) {\n    return obj.currentStyle[name];\n  } else {\n    return getComputedStyle(obj, false)[name];\n  }\n}\n\nfunction hasClass(ele, cls) {\n  let reg = new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)');\n  return ele.className.match(reg);\n}\n\nfunction addClass(ele, cls) {\n  if (!hasClass(ele, cls)) {\n    let reg = new RegExp('/(^s*)|(s*$)/g');\n    let className = ele.className.replace(reg, '');\n    ele.className = className + ' ' + cls;\n  }\n}\n\nfunction removeClass(ele, cls) {\n  if (hasClass(ele, cls)) {\n    let reg = new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)');\n    ele.className = ele.className.replace(reg, ' ');\n  }\n}\n",{"version":3,"sources":["Marquee.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Marquee.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <ul class=\"list\" :style=\"stylesWrap\" @mouseenter=\"mouseEnter()\" @mouseleave=\"mouseLeave()\">\n    <li v-for=\"(item, index) in marqueeList\" :key=\"index\" class=\"row\" :style=\"stylesItem\" ref=\"li\" v-html=\"item\"></li>\n  </ul>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      current: -1,\n      // ul样式\n      stylesWrap: {\n        width: this.width,\n        height: this.height\n      },\n      // li样式\n      stylesItem: {\n        height: this.height,\n        lineHeight: this.height,\n        color: this.color,\n        fontSize: this.fontSize\n      },\n      scrollHeight: 0,\n      showing: false,\n      paused: false\n    };\n  },\n  props: {\n    // 宽度\n    width: {\n      type: String,\n      default: '200px'\n    },\n    // 高度\n    height: {\n      type: String,\n      default: '38px'\n    },\n    // 字体颜色\n    color: {\n      type: String,\n      default: '#fff'\n    },\n    // 字体大小\n    fontSize: {\n      type: String,\n      default: '12px'\n    },\n    // 下拉速度\n    showSpeed: {\n      type: Number,\n      validator(val) {\n        return /^\\d+$/.test(val);\n      },\n      default: 15\n    },\n    // 切换间隔时间(ms)\n    pauseTime: {\n      type: Number,\n      validator(val) {\n        return /^\\d+$/.test(val);\n      },\n      default: 2500\n    },\n    // 滚动速度\n    scrollSpeed: {\n      type: Number,\n      validator(val) {\n        return /^\\d+$/.test(val);\n      },\n      default: 22\n    },\n    // 悬停时暂停\n    pauseOnHover: {\n      type: Boolean,\n      default: false\n    },\n    // 内容\n    marqueeList: {\n      type: Array,\n      default: function() {\n        return [];\n      }\n    }\n  },\n  mounted() {\n    if (this.marqueeList.length > 0) {\n      this.init();\n    }\n  },\n  methods: {\n    init() {\n      this.mqLength = this.marqueeList.length;\n      this.scrollHeight = this.height.replace(/[^0-9]/gi, '');\n      this.$nextTick(() => {\n        this.showNext();\n      });\n    },\n    mouseEnter() {\n      if (!this.pauseOnHover === true) return false;\n\n      this.pause();\n    },\n    mouseLeave() {\n      if (!this.pauseOnHover === true) return false;\n\n      this.resume();\n    },\n    pause() {\n      this.paused = true;\n\n      if (this.showing !== true) {\n        let li = this.$refs.li[this.current];\n        clearInterval(li.timer);\n      }\n    },\n    resume() {\n      this.paused = false;\n\n      if (this.showing !== true) {\n        let li = this.$refs.li[this.current];\n        this.scroll(li, 1);\n      }\n    },\n    showNext() {\n      this.current++;\n\n      if (this.current >= this.mqLength) {\n        this.current = 0;\n      }\n\n      this.show(this.current);\n    },\n    show(i) {\n      for (let item of this.$refs.li) {\n        if (hasClass(item, 'active')) {\n          return false;\n        }\n      }\n\n      let li = this.$refs.li[i];\n\n      // 调整至可见区域顶部\n      li.style.left = '0px';\n      li.style.top = -this.scrollHeight + 'px';\n\n      addClass(li, 'active');\n\n      this.showing = true;\n      //下移至可见区域\n      animate(li, { top: 0 }, this.showSpeed, 0.01, () => {\n        this.showing = false;\n        this.scroll(li);\n      });\n    },\n    scroll(li, delay) {\n      if (this.paused === true) return false;\n\n      if (li.scrollWidth > li.clientWidth) {\n        // 左移\n        setTimeout(() => {\n          if (this.paused === true) return false;\n\n          animate(li, { left: -li.scrollWidth }, this.scrollSpeed, 1, () => {\n            this.finish(li);\n          });\n        }, delay || 1000);\n      } else {\n        setTimeout(() => {\n          // 下移动至底部不可见区域\n          if (this.paused === true) return false;\n\n          animate(li, { top: this.scrollHeight }, this.showSpeed, 0.01);\n          this.finish(li);\n        }, delay || this.pauseTime);\n      }\n    },\n    finish(li) {\n      removeClass(li, 'active');\n\n      this.showNext();\n    }\n  },\n  beforeDestroy() {\n    this.pause();\n\n    this.current = -1;\n  },\n  watch: {\n    marqueeList(val) {\n      if (val.length > 0) {\n        this.init();\n      }\n    }\n  }\n};\n\nfunction animate(obj, json, interval, sp, fn) {\n  clearInterval(obj.timer);\n  obj.timer = setInterval(() => {\n    var flag = true;\n    for (var arr in json) {\n      var icur = 0;\n      if (arr == 'opacity') {\n        icur = Math.round(parseFloat(getStyle(obj, arr)) * 100);\n      } else {\n        icur = parseInt(getStyle(obj, arr));\n      }\n      var speed;\n      if (sp == 1) {\n        // 匀速\n        speed = 0;\n        if (json[arr] < 0) {\n          speed--;\n        } else {\n          speed++;\n        }\n      } else {\n        // 缓冲效果\n        speed = (json[arr] - icur) * sp;\n        speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);\n      }\n\n      if (icur != json[arr]) {\n        flag = false;\n      }\n      if (arr == 'opacity') {\n        obj.style.filter = 'alpha(opacity : ' + (icur + speed) + ')';\n        obj.style.opacity = (icur + speed) / 100;\n      } else {\n        obj.style[arr] = icur + speed + 'px';\n      }\n    }\n\n    if (flag) {\n      clearInterval(obj.timer);\n      if (fn) {\n        fn();\n      }\n    }\n  }, interval);\n}\n\n// 获取样式\nfunction getStyle(obj, name) {\n  if (obj.currentStyle) {\n    return obj.currentStyle[name];\n  } else {\n    return getComputedStyle(obj, false)[name];\n  }\n}\n\nfunction hasClass(ele, cls) {\n  let reg = new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)');\n  return ele.className.match(reg);\n}\n\nfunction addClass(ele, cls) {\n  if (!hasClass(ele, cls)) {\n    let reg = new RegExp('/(^s*)|(s*$)/g');\n    let className = ele.className.replace(reg, '');\n    ele.className = className + ' ' + cls;\n  }\n}\n\nfunction removeClass(ele, cls) {\n  if (hasClass(ele, cls)) {\n    let reg = new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)');\n    ele.className = ele.className.replace(reg, ' ');\n  }\n}\n</script>\n\n<style scoped>\n.list {\n  overflow: hidden;\n  position: relative;\n  width: 100%;\n  display: inline-block;\n}\n.row {\n  display: block;\n  white-space: nowrap;\n  width: 100%;\n  position: absolute;\n  top: -999em;\n  left: 0;\n}\n</style>\n"]}]}