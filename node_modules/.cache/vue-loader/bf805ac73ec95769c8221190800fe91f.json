{"remainingRequest":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\westlottery\\lottery_mobile_vue\\src\\views\\login\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\src\\views\\login\\login.vue","mtime":1565599934741},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n\r\nimport { _getstatus } from '@/assets/src/forgame.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            siteID: this.$global.siteID,\r\n            input:{\r\n                loginID: \"\",\r\n                loginPw: \"\",\r\n                loginCode: \"\"\r\n            },\r\n            vcode: \"\",            \r\n        };\r\n    },\r\n    methods: {\r\n        VerifySessionStatus: function(token) {           \r\n            this.$axios(\r\n                \"VerifySessionStatus\", { token },\r\n                (resp)=> {\r\n                    let json = JSON.parse(resp.data);\r\n                    if (\r\n                        json.message == \"验证Session通过!\" ||\r\n                        json.message == \"驗證Session通過!\"\r\n                    )\r\n                        this.$router.push({ path: \"index\" });\r\n                    else alert(_loginjson.error._error);\r\n                }\r\n            );\r\n        },\r\n\r\n        login: function() {\r\n            let {loginID,loginPw,loginCode} = this.input\r\n\r\n            if (loginID == \"\" || loginPw == \"\") {\r\n                alert(\"请填入帐号或密码\");\r\n            } else if (loginCode == \"\")\r\n                alert(\"请输入验证码!\");\r\n            else if (this.vcode != loginCode) {\r\n                alert(\"验证码输入错误!\");\r\n                this.createCode()\r\n            } else {  \r\n                //登入\r\n                this.$axios(\r\n                    \"login\", {\r\n                        siteID: this.siteID,\r\n                        loginID: loginID,\r\n                        loginPw: loginPw\r\n                    },\r\n                    (resp)=> {\r\n                        let loginjson = JSON.parse(resp.data);\r\n                        let {token,isMember,isTrial,memberID} = loginjson.info\r\n\r\n                        if (loginjson.message == \"登入成功\") {\r\n                            let _web = JSON.parse(this.getCookie(\"webs\"));\r\n                            _web.Authorization = token;\r\n                            _web.loginID = loginID;\r\n                            _web.isMember = isMember;\r\n                            _web.isTrial = isTrial;\r\n                            _web.memberID = memberID\r\n                            this.setCookie(\"webs\", JSON.stringify(_web));\r\n                            this.$socket.emit('join', { siteID: this.$siteID ,memberID,token})\r\n\r\n                            //更新vuex 状态\r\n                            this.$store.dispatch(\"updateloginID\", loginID)\r\n                            this.$store.dispatch(\"setisLogin\", true)\r\n                            //验证session\r\n                            this.VerifySessionStatus(token);\r\n                            _getstatus(this);\r\n\r\n                        } else {\r\n                            alert(loginjson.error._error)\r\n\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        },\r\n        createCode: function() {\r\n            let code = \"\";\r\n            var codeLength = 4; //验证码的长度\r\n            var checkCode = document.getElementById(\"code\");\r\n            var random = new Array(\r\n                0,\r\n                1,\r\n                2,\r\n                3,\r\n                4,\r\n                5,\r\n                6,\r\n                7,\r\n                8,\r\n                9,\r\n                \"A\",\r\n                \"B\",\r\n                \"C\",\r\n                \"D\",\r\n                \"E\",\r\n                \"F\",\r\n                \"G\",\r\n                \"H\",\r\n                \"I\",\r\n                \"J\",\r\n                \"K\",\r\n                \"L\",\r\n                \"M\",\r\n                \"N\",\r\n                \"O\",\r\n                \"P\",\r\n                \"Q\",\r\n                \"R\",\r\n                \"S\",\r\n                \"T\",\r\n                \"U\",\r\n                \"V\",\r\n                \"W\",\r\n                \"X\",\r\n                \"Y\",\r\n                \"Z\"\r\n            ); //随机数\r\n            for (var i = 0; i < codeLength; i++) {\r\n                //循环操作\r\n                var index = Math.floor(Math.random() * 36); //取得随机数的索引（0~35）\r\n                code += random[index]; //根据索引取得随机数加到code上\r\n            }\r\n            this.vcode = code; //把code值赋给验证码\r\n        }\r\n    },\r\n    watch: {\r\n        'input.loginCode': function() {\r\n            this.input.loginCode = this.input.loginCode.toUpperCase();\r\n        }\r\n    },\r\n    mounted() {\r\n        this.createCode();\r\n    }\r\n};\r\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views/login","sourcesContent":["<template src='./login.html'>\r\n    \r\n</template>\r\n\r\n<script>\r\nimport { _getstatus } from '@/assets/src/forgame.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            siteID: this.$global.siteID,\r\n            input:{\r\n                loginID: \"\",\r\n                loginPw: \"\",\r\n                loginCode: \"\"\r\n            },\r\n            vcode: \"\",            \r\n        };\r\n    },\r\n    methods: {\r\n        VerifySessionStatus: function(token) {           \r\n            this.$axios(\r\n                \"VerifySessionStatus\", { token },\r\n                (resp)=> {\r\n                    let json = JSON.parse(resp.data);\r\n                    if (\r\n                        json.message == \"验证Session通过!\" ||\r\n                        json.message == \"驗證Session通過!\"\r\n                    )\r\n                        this.$router.push({ path: \"index\" });\r\n                    else alert(_loginjson.error._error);\r\n                }\r\n            );\r\n        },\r\n\r\n        login: function() {\r\n            let {loginID,loginPw,loginCode} = this.input\r\n\r\n            if (loginID == \"\" || loginPw == \"\") {\r\n                alert(\"请填入帐号或密码\");\r\n            } else if (loginCode == \"\")\r\n                alert(\"请输入验证码!\");\r\n            else if (this.vcode != loginCode) {\r\n                alert(\"验证码输入错误!\");\r\n                this.createCode()\r\n            } else {  \r\n                //登入\r\n                this.$axios(\r\n                    \"login\", {\r\n                        siteID: this.siteID,\r\n                        loginID: loginID,\r\n                        loginPw: loginPw\r\n                    },\r\n                    (resp)=> {\r\n                        let loginjson = JSON.parse(resp.data);\r\n                        let {token,isMember,isTrial,memberID} = loginjson.info\r\n\r\n                        if (loginjson.message == \"登入成功\") {\r\n                            let _web = JSON.parse(this.getCookie(\"webs\"));\r\n                            _web.Authorization = token;\r\n                            _web.loginID = loginID;\r\n                            _web.isMember = isMember;\r\n                            _web.isTrial = isTrial;\r\n                            _web.memberID = memberID\r\n                            this.setCookie(\"webs\", JSON.stringify(_web));\r\n                            this.$socket.emit('join', { siteID: this.$siteID ,memberID,token})\r\n\r\n                            //更新vuex 状态\r\n                            this.$store.dispatch(\"updateloginID\", loginID)\r\n                            this.$store.dispatch(\"setisLogin\", true)\r\n                            //验证session\r\n                            this.VerifySessionStatus(token);\r\n                            _getstatus(this);\r\n\r\n                        } else {\r\n                            alert(loginjson.error._error)\r\n\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        },\r\n        createCode: function() {\r\n            let code = \"\";\r\n            var codeLength = 4; //验证码的长度\r\n            var checkCode = document.getElementById(\"code\");\r\n            var random = new Array(\r\n                0,\r\n                1,\r\n                2,\r\n                3,\r\n                4,\r\n                5,\r\n                6,\r\n                7,\r\n                8,\r\n                9,\r\n                \"A\",\r\n                \"B\",\r\n                \"C\",\r\n                \"D\",\r\n                \"E\",\r\n                \"F\",\r\n                \"G\",\r\n                \"H\",\r\n                \"I\",\r\n                \"J\",\r\n                \"K\",\r\n                \"L\",\r\n                \"M\",\r\n                \"N\",\r\n                \"O\",\r\n                \"P\",\r\n                \"Q\",\r\n                \"R\",\r\n                \"S\",\r\n                \"T\",\r\n                \"U\",\r\n                \"V\",\r\n                \"W\",\r\n                \"X\",\r\n                \"Y\",\r\n                \"Z\"\r\n            ); //随机数\r\n            for (var i = 0; i < codeLength; i++) {\r\n                //循环操作\r\n                var index = Math.floor(Math.random() * 36); //取得随机数的索引（0~35）\r\n                code += random[index]; //根据索引取得随机数加到code上\r\n            }\r\n            this.vcode = code; //把code值赋给验证码\r\n        }\r\n    },\r\n    watch: {\r\n        'input.loginCode': function() {\r\n            this.input.loginCode = this.input.loginCode.toUpperCase();\r\n        }\r\n    },\r\n    mounted() {\r\n        this.createCode();\r\n    }\r\n};\r\n</script>\r\n\r\n<style src='./login.css'>\r\n\r\n</style>\r\n"]}]}