{"remainingRequest":"E:\\lottery_mobile_vue\\node_modules\\babel-loader\\lib\\index.js!E:\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\lottery_mobile_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\lottery_mobile_vue\\src\\components\\games\\bettingFiled\\BetttingField.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\lottery_mobile_vue\\src\\components\\games\\bettingFiled\\BetttingField.vue","mtime":1558951234000},{"path":"E:\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\lottery_mobile_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\lottery_mobile_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _parseFloat from \"E:\\\\lottery_mobile_vue\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/parse-float\";\nimport _parseInt from \"E:\\\\lottery_mobile_vue\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/parse-int\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\nimport { _betting } from \"@/assets/src/forgame.js\";\nimport { setInterval, clearInterval } from 'timers';\nexport default {\n  props: {\n    barMax: Number,\n    forbet: Array,\n    quantity: Number,\n    rate: Number,\n    time: Object,\n    issueTrace: Boolean\n  },\n  data: function data() {\n    return {\n      unitPrice: 2,\n      barValue: 0,\n      detailData: {\n        play: '',\n        name: ''\n      },\n      // 购物车测试用\n      orderDetail: [],\n      betSubInfo: [],\n      panko: this.$store.state.panko,\n      openPage: true,\n      openSlide: false,\n      //是否追單\n      WinningStop: false,\n      //中獎停止\n      ChasingCondition: false,\n      //追號條件\n      WinorLose: false,\n      // 贏or輸\n      acLimit: 0,\n      issueCount: 3,\n      //追號期數           \n      double: 1,\n      //倍率\n      isshowdDetailFb: false,\n      //详细下注弹窗是否开启 \n      mask: true,\n      bettingmsg: false,\n      warningOpen: false,\n      //alert warning 弹窗\n      successOpen: false,\n      alertMsg: null,\n      closemsg: false,\n      //封盘显示弹窗\n      closesecond: 5,\n      //秒数自动关闭\n      closetimer: null // timer\n\n    };\n  },\n  methods: {\n    alert: function alert(msg) {\n      this.alertMsg = msg;\n      this.warningOpen = true;\n    },\n    alertSuc: function alertSuc(msg) {\n      this.alertMsg = msg;\n      this.successOpen = true;\n    },\n    betting: function betting() {\n      var _this = this;\n\n      //立即下注\n      var _summaryAmt = 0;\n      var _betMainInfo = [];\n      var bet = this.forbet;\n\n      if (this.forbet.length == 0) {\n        this.alert('请选择一注');\n        return;\n      }\n\n      bet.forEach(function (e) {\n        var b = e.betMainInfo;\n        b.unitPrice = _parseInt(_this.unitPrice); //写入单价\n\n        _summaryAmt += _parseInt(b.unitPrice) * _parseInt(b.quantity); //计算总额\n\n        _betMainInfo.push(b);\n      }); //更新vuex 状态\n\n      this.$store.dispatch(\"setbetMainInfo\", _betMainInfo);\n      this.$store.dispatch('updatesummaryAmt', _summaryAmt);\n      this.$store.dispatch(\"setbetSubInfo\", this.betSubInfo);\n      this.bettingmsg = true;\n\n      _betting(this);\n    },\n    openshopcar: function openshopcar() {\n      if (this.sumcount == 0) {\n        this.alert('购物车是空的');\n        return;\n      }\n\n      this.openPage = !this.openPage;\n    },\n    toshopcar: function toshopcar() {\n      var _this2 = this;\n\n      if (this.forbet.length == 0) {\n        this.alert('请选择一注');\n        return;\n      }\n\n      this.forbet.forEach(function (e) {\n        e.betMainInfo.unitPrice = _parseInt(_this2.unitPrice); //写入单价                 \n\n        _this2.orderDetail.push(e);\n      });\n      this.$parent.childByValue();\n      this.alertSuc('已加入购物篮');\n    },\n    shopbet: function shopbet() {\n      var _betMainInfo = [];\n      this.orderDetail.forEach(function (v, i) {\n        _betMainInfo.push(v.betMainInfo);\n      });\n\n      if (this.issueTrace) {\n        //有追號\n        var bet = this.$store.state.bet;\n        bet.preOrder = true;\n        bet.autoCancel = this.WinningStop ? 1 : 0;\n        bet.aclSign = this.ChasingCondition ? 1 : 0;\n        if (this.ChasingCondition) bet.acLimit = this.acLimit;\n        bet.issueNoCount = this.betSubInfo.length;\n        bet.summaryAmt = this.summary;\n        bet.betMainInfo = _betMainInfo;\n        bet.betSubInfo = this.betSubInfo;\n        this.$store.dispatch(\"updateBet\", bet);\n      } else {\n        //無追號\n        //更新vuex 状态\n        this.$store.dispatch(\"setbetMainInfo\", _betMainInfo);\n        this.$store.dispatch('updatesummaryAmt', this.summary);\n        this.$store.dispatch(\"setbetSubInfo\", this.betSubInfo);\n      }\n\n      this.bettingmsg = true;\n\n      _betting(this);\n    },\n    removeItem: function removeItem(uid) {\n      var bet = this.orderDetail.filter(function (v, i) {\n        return v.uid != uid;\n      });\n      this.orderDetail = bet;\n    },\n    init: function init() {\n      this.$parent.childByValue();\n      this.$parent.bundledatainit();\n      this.orderDetail = [];\n      this.betMainInfo = [];\n      this.openPage = true;\n      this.openSlide = false;\n      this.double = 1;\n      this.bettingmsg = false; //状态初始\n\n      var bet = this.$store.state.bet;\n      bet.issueNoCount = 1;\n      bet.summaryAmt = 0;\n      bet.preOrder = false;\n      bet.betMainInfo = [];\n      bet.betSubInfo = [{\n        issueNo: this.$store.state.panko.openissueNo,\n        multiple: 1\n      }];\n      this.$store.dispatch(\"updateBet\", bet);\n    },\n    setbetSubInfo: function setbetSubInfo() {\n      if (this.openSlide) {\n        var t = this;\n        var arr = [];\n        this.$store.state.issueNoTrace.filter(function (v, i) {\n          if (i < t.issueCount) arr.push({\n            issueNo: v.issueNo,\n            multiple: 1\n          });\n        });\n        this.betSubInfo = arr;\n      } else this.betSubInfo = [{\n        issueNo: this.$store.state.panko.openissueNo,\n        multiple: 1\n      }];\n    },\n    // 详细下注资讯\n    showDetail: function showDetail(play, name) {\n      this.isshowdDetailFb = true;\n      this.detailData.play = play;\n      this.detailData.name = name;\n    },\n    checkunitPrice: function checkunitPrice() {\n      if (this.unitPrice == '' || _parseInt(this.unitPrice) < 1) this.unitPrice = 1;\n    },\n    timer: function timer() {\n      var _this3 = this;\n\n      //封盘显示timer\n      this.closetimer = setInterval(function () {\n        _this3.closesecond--;\n\n        if (_this3.closesecond == 0) {\n          _this3.stoptimer();\n\n          _this3.closemsg = false;\n        }\n      }, 1000);\n    },\n    stoptimer: function stoptimer() {\n      clearInterval(this.closetimer);\n      this.closesecond = 5;\n    }\n  },\n  watch: {\n    barValue: function barValue(nv, ov) {\n      this.$emit('update:rate', _parseFloat(nv));\n    },\n    issueCount: function issueCount(nv, ov) {\n      if (nv > this.maxIssueCount) {\n        this.issueCount = this.maxIssueCount;\n        this.alert('最大追单期数:' + this.maxIssueCount);\n      } else if (nv < 1) {\n        this.issueCount = 1;\n      }\n\n      this.double = 1;\n      this.setbetSubInfo();\n    },\n    openSlide: function openSlide(nv, ov) {\n      this.setbetSubInfo();\n    },\n    double: function double(nv, ov) {\n      if (nv < 1) this.double = 1;\n\n      for (var i = 0; i < this.betSubInfo.length; i++) {\n        this.betSubInfo[0].multiple = 1;\n        if (i > 0) this.betSubInfo[i].multiple = this.betSubInfo[i - 1].multiple * this.double;\n      }\n    },\n    rate: function rate(nv, ov) {\n      this.barValue = nv;\n    },\n    '$store.state.panko': {\n      handler: function handler(nv, ov) {\n        this.betSubInfo = new Array({\n          issueNo: this.$store.state.panko.openissueNo,\n          multiple: 1\n        });\n      },\n      deep: true\n    },\n    closemsg: function closemsg(nv, ov) {\n      if (nv == true) {\n        this.timer();\n      }\n    }\n  },\n  computed: {\n    balance: function balance() {\n      return this.$store.state.balance;\n    },\n    sumcount: function sumcount() {\n      var sum = 0;\n      this.orderDetail.forEach(function (v, i) {\n        sum += v.betMainInfo.quantity;\n      });\n      return sum;\n    },\n    summary: function summary() {\n      var summary = 0;\n      this.orderDetail.forEach(function (v, i) {\n        summary += v.betMainInfo.quantity * v.betMainInfo.unitPrice;\n      });\n      var multiple = 0;\n      this.betSubInfo.forEach(function (v, i) {\n        multiple += isNaN(_parseInt(v.multiple)) ? 0 : _parseInt(v.multiple);\n      });\n      return summary * multiple;\n    },\n    maxIssueCount: function maxIssueCount() {\n      return this.$store.state.issueNoTrace.length;\n    }\n  }\n};",{"version":3,"sources":["BetttingField.vue"],"names":[],"mappings":"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","sourcesContent":["<script>\r\nimport { _betting } from \"@/assets/src/forgame.js\";\r\nimport { setInterval, clearInterval } from 'timers';\r\n\r\nexport default {\r\n    props: {\r\n        barMax: Number,\r\n        forbet: Array,\r\n        quantity: Number,\r\n        rate: Number,\r\n        time: Object,\r\n        issueTrace: Boolean\r\n    },\r\n    data() {\r\n        return {\r\n            unitPrice: 2,\r\n            barValue: 0,\r\n            detailData: {\r\n                play: '',\r\n                name: '',\r\n            },\r\n            // 购物车测试用\r\n            orderDetail: [],\r\n            betSubInfo: [],\r\n            panko: this.$store.state.panko,\r\n            openPage: true,\r\n            openSlide: false, //是否追單\r\n            WinningStop: false, //中獎停止\r\n            ChasingCondition: false, //追號條件\r\n            WinorLose: false, // 贏or輸\r\n            acLimit: 0,\r\n            issueCount: 3, //追號期數           \r\n            double: 1, //倍率\r\n            isshowdDetailFb: false, //详细下注弹窗是否开启 \r\n            mask: true,\r\n            bettingmsg: false,\r\n            warningOpen: false, //alert warning 弹窗\r\n            successOpen:false,\r\n            alertMsg:null,\r\n            closemsg: false, //封盘显示弹窗\r\n            closesecond: 5, //秒数自动关闭\r\n            closetimer:null // timer\r\n        };\r\n    },\r\n    methods: {\r\n        alert(msg){\r\n            this.alertMsg = msg\r\n            this.warningOpen = true\r\n        },\r\n        alertSuc(msg){\r\n            this.alertMsg = msg\r\n            this.successOpen = true\r\n        },\r\n        betting() { //立即下注\r\n            let _summaryAmt = 0;\r\n            let _betMainInfo = [];\r\n            let bet = this.forbet\r\n            if (this.forbet.length == 0) {\r\n                this.alert('请选择一注')\r\n                return;\r\n            }\r\n            bet.forEach(e => {\r\n                let b = e.betMainInfo\r\n                b.unitPrice = parseInt(this.unitPrice); //写入单价\r\n                _summaryAmt += parseInt(b.unitPrice) * parseInt(b.quantity); //计算总额\r\n                _betMainInfo.push(b)\r\n\r\n            });\r\n\r\n            //更新vuex 状态\r\n            this.$store.dispatch(\"setbetMainInfo\", _betMainInfo)\r\n            this.$store.dispatch('updatesummaryAmt', _summaryAmt)\r\n            this.$store.dispatch(\"setbetSubInfo\", this.betSubInfo);\r\n\r\n            this.bettingmsg = true\r\n            _betting(this)\r\n\r\n        },\r\n        openshopcar() {\r\n            if (this.sumcount == 0) {\r\n                this.alert('购物车是空的')\r\n                return;\r\n            }\r\n            this.openPage = !this.openPage\r\n        },\r\n        toshopcar() {\r\n            if (this.forbet.length == 0) {\r\n                this.alert('请选择一注')\r\n                return;\r\n            }\r\n\r\n            this.forbet.forEach(e => {\r\n                e.betMainInfo.unitPrice = parseInt(this.unitPrice); //写入单价                 \r\n                this.orderDetail.push(e)\r\n            });\r\n\r\n            this.$parent.childByValue()\r\n            this.alertSuc('已加入购物篮')\r\n        },\r\n        shopbet() {\r\n            let _betMainInfo = []\r\n            this.orderDetail.forEach(function(v, i) {\r\n                _betMainInfo.push(v.betMainInfo)\r\n            })\r\n            if (this.issueTrace) { //有追號\r\n                let bet = this.$store.state.bet\r\n\r\n                bet.preOrder = true;\r\n                bet.autoCancel = this.WinningStop ? 1 : 0\r\n                bet.aclSign = this.ChasingCondition ? 1 : 0\r\n\r\n                if (this.ChasingCondition)\r\n                    bet.acLimit = this.acLimit\r\n                bet.issueNoCount = this.betSubInfo.length\r\n                bet.summaryAmt = this.summary\r\n                bet.betMainInfo = _betMainInfo\r\n                bet.betSubInfo = this.betSubInfo\r\n\r\n                this.$store.dispatch(\"updateBet\", bet)\r\n\r\n            } else { //無追號\r\n\r\n                //更新vuex 状态\r\n                this.$store.dispatch(\"setbetMainInfo\", _betMainInfo)\r\n                this.$store.dispatch('updatesummaryAmt', this.summary)\r\n                this.$store.dispatch(\"setbetSubInfo\", this.betSubInfo);\r\n            }\r\n            this.bettingmsg = true\r\n            _betting(this)\r\n        },\r\n        removeItem(uid) {\r\n            let bet = this.orderDetail.filter(function(v, i) {\r\n                return v.uid != uid\r\n            })\r\n            this.orderDetail = bet\r\n        },\r\n        init() {\r\n            this.$parent.childByValue()\r\n            this.$parent.bundledatainit()\r\n            this.orderDetail = []\r\n            this.betMainInfo = []\r\n            this.openPage = true\r\n            this.openSlide = false\r\n            this.double = 1\r\n            this.bettingmsg = false\r\n            //状态初始\r\n            let bet = this.$store.state.bet\r\n            bet.issueNoCount = 1\r\n            bet.summaryAmt = 0\r\n            bet.preOrder = false\r\n            bet.betMainInfo = []\r\n            bet.betSubInfo = [{ issueNo: this.$store.state.panko.openissueNo, multiple: 1 }]\r\n            this.$store.dispatch(\"updateBet\", bet)\r\n        },\r\n        setbetSubInfo() {\r\n            if (this.openSlide) {\r\n                let t = this\r\n                let arr = []\r\n                this.$store.state.issueNoTrace.filter(function(v, i) {\r\n                    if (i < t.issueCount) arr.push({ issueNo: v.issueNo, multiple: 1 })\r\n                })\r\n                this.betSubInfo = arr\r\n            } else\r\n                this.betSubInfo = [{ issueNo: this.$store.state.panko.openissueNo, multiple: 1 }]\r\n        },\r\n        // 详细下注资讯\r\n        showDetail(play, name) {\r\n            this.isshowdDetailFb = true;\r\n            this.detailData.play = play;\r\n            this.detailData.name = name;\r\n        },\r\n        checkunitPrice() {            \r\n            if (this.unitPrice == '' ||  parseInt(this.unitPrice) <1) this.unitPrice = 1          \r\n        },     \r\n        timer(){ //封盘显示timer\r\n            this.closetimer = setInterval(()=>{\r\n                this.closesecond--                \r\n                if(this.closesecond==0){\r\n                    this.stoptimer()\r\n                    this.closemsg=false\r\n                }\r\n            },1000)\r\n        },\r\n        stoptimer(){\r\n            clearInterval(this.closetimer)\r\n            this.closesecond=5\r\n        },\r\n        \r\n    },\r\n    watch: {\r\n        barValue(nv, ov) {\r\n            this.$emit('update:rate', parseFloat(nv));\r\n        },\r\n        issueCount(nv, ov) {\r\n            if (nv > this.maxIssueCount) {\r\n                this.issueCount = this.maxIssueCount\r\n                this.alert('最大追单期数:' + this.maxIssueCount)\r\n            } else if (nv < 1) {\r\n                this.issueCount = 1\r\n            }\r\n            this.double = 1\r\n            this.setbetSubInfo()\r\n        },\r\n        openSlide(nv, ov) {\r\n            this.setbetSubInfo()\r\n        },\r\n        double(nv, ov) {\r\n            if (nv < 1) this.double = 1\r\n\r\n            for (let i = 0; i < this.betSubInfo.length; i++) {\r\n                this.betSubInfo[0].multiple = 1\r\n                if (i > 0)\r\n                    this.betSubInfo[i].multiple = this.betSubInfo[i - 1].multiple * this.double\r\n            }\r\n        },\r\n        rate(nv, ov) {\r\n            this.barValue = nv\r\n        },\r\n        '$store.state.panko': {\r\n            handler(nv, ov) {\r\n                this.betSubInfo = new Array({ issueNo: this.$store.state.panko.openissueNo, multiple: 1 })\r\n            },\r\n            deep: true\r\n        },\r\n        closemsg(nv, ov) {\r\n            if (nv == true) {\r\n                this.timer()               \r\n            }\r\n        },\r\n        \r\n    },\r\n    computed: {\r\n        balance() {\r\n            return this.$store.state.balance;\r\n        },\r\n        sumcount() {\r\n            let sum = 0;\r\n            this.orderDetail.forEach(function(v, i) {\r\n                sum += v.betMainInfo.quantity\r\n            })\r\n            return sum\r\n        },\r\n        summary() {\r\n            let summary = 0;\r\n            this.orderDetail.forEach(function(v, i) {\r\n                summary += v.betMainInfo.quantity * v.betMainInfo.unitPrice\r\n            })\r\n            let multiple = 0\r\n            this.betSubInfo.forEach(function(v, i) {\r\n                multiple += isNaN(parseInt(v.multiple)) ? 0 : parseInt(v.multiple)\r\n            })\r\n\r\n            return summary * multiple\r\n        },\r\n        maxIssueCount() {\r\n            return this.$store.state.issueNoTrace.length\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<template src=\"./bettingField.html\">\r\n    \r\n</template>\r\n\r\n<style src=\"./bettingField.css\" scoped>\r\n\r\n</style>"],"sourceRoot":"src/components/games/bettingFiled"}]}