{"remainingRequest":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\westlottery\\lottery_mobile_vue\\src\\views\\user\\UserWalletTransfer.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\src\\views\\user\\UserWalletTransfer.vue","mtime":1567738730278},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\westlottery\\lottery_mobile_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\n//\n//\nimport { mapGetters } from 'vuex';\nexport default {\n  data: function data() {\n    return {\n      siteID: this.$global.siteID,\n      mainbalance: null,\n      wallentList: [],\n      // wallentListBalance: [],\n      userinfo: null,\n      showtransfer: false,\n      accountTypeSelector: null,\n      //转入 转出\n      transferAmount: null,\n      picked: null,\n      outid: null,\n      inid: null,\n      outspName: null,\n      outpoints: null,\n      inspName: null,\n      inpoints: null,\n      //转账类型\n      transferTypeName: null,\n      transferType: null,\n      showType: false,\n      autoTransAmt: 0,\n      //金錢選擇\n      selectorMoney: [{\n        point: 100\n      }, {\n        point: 500\n      }, {\n        point: 1000\n      }, {\n        point: 5000\n      }, {\n        point: 9999\n      }]\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    _this.getuserinfo();\n  },\n  methods: {\n    getWalletList: function getWalletList() {\n      var _this = this;\n\n      var _web = JSON.parse(this.getCookie(\"webs\")); // _this.balance = _web.balance;\n\n\n      var loginID = _web.loginID;\n      var Authorization = _web.Authorization;\n      this.$axios(\"getwalletlist\", {\n        siteID: this.siteID,\n        loginID: loginID,\n        token: Authorization\n      }, function (resp) {\n        var res = JSON.parse(resp.data);\n        var list = res.data;\n        _this.wallentList = res.data.filter(function (i) {\n          var f = _this.userinfo.data.find(function (e) {\n            return i.spID == e.spid;\n          });\n\n          if (f != undefined) {\n            i.points = f.points;\n\n            if (i.spID == 0) {\n              _this.mainbalance = f.points;\n            }\n\n            if (i.spID == 43) {\n              i.src = require(\"@/assets/img/CQ92.png\");\n            }\n\n            if (i.spID == 54) {\n              i.src = require(\"@/assets/img/LEG.png\");\n            }\n          }\n\n          return !i.isOwn && i.spID != 0;\n        });\n      });\n    },\n    //取得会员资讯\n    getuserinfo: function getuserinfo() {\n      var _this = this;\n\n      _this.transferCancel();\n\n      var _web = JSON.parse(this.getCookie(\"webs\")); // _this.balance = _web.balance;\n\n\n      var loginID = _web.loginID;\n      var Authorization = _web.Authorization;\n      this.$axios(\"getuserinfo\", {\n        jsonString: {\n          siteID: this.siteID,\n          loginID: loginID\n        },\n        token: Authorization\n      }, function (resp) {\n        var res = JSON.parse(resp.data);\n        var list = res.data;\n        var info = res.info; // _this.wallentListBalance = [];\n\n        _this.userinfo = res;\n        var autoTransType = info.autoTransType;\n\n        switch (autoTransType) {\n          case 1:\n            _this.accountTypeSelector = \"自订\";\n            break;\n\n          case 2:\n            _this.accountTypeSelector = \"免转钱包\";\n            break;\n\n          default:\n            _this.accountTypeSelector = \"智充宝\";\n            break;\n        } // for (let i = 0; i < list.length; i++) {\n        //   if (list[i].spid != 0) {\n        //     _this.wallentListBalance.push(list[i]);\n        //   }\n        // }\n\n\n        _this.getWalletList();\n      });\n    },\n    transOut: function transOut(v) {\n      if (v.spStatus == 2) return;\n      this.showtransfer = true;\n      this.outid = v.spID;\n      this.inid = 0;\n    },\n    transIn: function transIn(v) {\n      if (v.spStatus == 2) return;\n      this.showtransfer = true;\n      this.outid = 0;\n      this.inid = v.spID;\n    },\n    transferCancel: function transferCancel() {\n      this.showtransfer = false;\n      this.transferAmount = null;\n      this.outid = null;\n      this.inid = null;\n    },\n    //一键回收\n    alltransferOutWallet: function alltransferOutWallet() {\n      var _this = this;\n\n      var _web = JSON.parse(this.getCookie(\"webs\"));\n\n      var loginID = _web.loginID;\n      var Authorization = _web.Authorization;\n      this.$axios(\"alltransferOutWallet\", {\n        siteID: this.siteID,\n        loginID: loginID,\n        token: Authorization\n      }, function (resp) {\n        var res = JSON.parse(resp.data);\n        var list = res.data;\n\n        if (res.error._error) {// errorToast(res.error._error);\n        } else if (res.message) {\n          _this.getuserinfo();\n        }\n      });\n    },\n    //转入转出\n    transferWallet: function transferWallet() {\n      var _this = this;\n\n      var _web = JSON.parse(this.getCookie(\"webs\")); // _this.balance = _web.balance;\n\n\n      var loginID = _web.loginID;\n      var Authorization = _web.Authorization;\n\n      if (this.outpoints < this.transferAmount || this.transferAmount < 1) {\n        alert(\"账户余额不足\");\n        return;\n      }\n\n      this.$axios(\"TransferWallet\", {\n        siteID: this.siteID,\n        loginID: loginID,\n        fromWalletID: this.outid,\n        toWalletID: this.inid,\n        amount: this.transferAmount,\n        token: Authorization\n      }, function (resp) {\n        var res = JSON.parse(resp.data);\n        var list = res.data;\n\n        if (res.message) {\n          alert(res.message);\n\n          _this.getuserinfo();\n        }\n      });\n    },\n    //一鍵轉出\n    transferOutOneWallet: function transferOutOneWallet(v) {\n      if (v.spStatus == 2) return;\n\n      var _this = this;\n\n      var _web = JSON.parse(this.getCookie(\"webs\"));\n\n      var loginID = _web.loginID;\n      var Authorization = _web.Authorization;\n      this.$axios(\"TransferOutOneWallet\", {\n        siteID: this.siteID,\n        loginID: loginID,\n        walletID: v.spID,\n        token: Authorization\n      }, function (resp) {\n        var res = JSON.parse(resp.data);\n        var list = res.data;\n\n        if (res.error._error) {\n          alert(res.error._error);\n        } else if (res.message) {\n          alert(res.message);\n\n          _this.getuserinfo();\n        }\n      });\n    },\n    //一鍵轉入\n    allTransferInWallet: function allTransferInWallet(v) {\n      if (v.spStatus == 2) return;\n\n      var _this = this;\n\n      var _web = JSON.parse(this.getCookie(\"webs\"));\n\n      var loginID = _web.loginID;\n      var Authorization = _web.Authorization;\n      this.$axios(\"AllTransferInWallet\", {\n        siteID: this.siteID,\n        loginID: loginID,\n        walletID: v.spID,\n        token: Authorization\n      }, function (resp) {\n        var res = JSON.parse(resp.data);\n        var list = res.data;\n\n        if (res.error._error) {\n          alert(res.error._error);\n        } else if (res.message) {\n          alert(res.message);\n\n          _this.getuserinfo();\n        }\n      });\n    }\n  },\n  created: function created() {\n    // 1. 呼叫 api action\n    this.$store.dispatch(\"actionAJAXexample\");\n  },\n  computed: mapGetters({\n    // 6. 等待通知.. 調用 getter function 取得 state\n    datalist: \"getDatalist\"\n  }),\n  watch: {\n    outid: function outid(nv, ov) {\n      if (nv == null) {\n        this.outspName = null;\n        this.outpoints = null;\n      } else if (nv == 0) {\n        this.outspName = \"主账户\";\n        this.outpoints = this.mainbalance;\n      } else {\n        var f = this.wallentList.find(function (e) {\n          return e.spID == nv;\n        });\n        this.outspName = f.spName;\n        this.outpoints = f.points;\n      }\n    },\n    inid: function inid(nv, ov) {\n      if (nv == null) {\n        this.inspName = null;\n        this.inpoints = null;\n      } else if (nv == 0) {\n        this.inspName = \"主账户\";\n        this.inpoints = this.mainbalance;\n      } else {\n        var f = this.wallentList.find(function (e) {\n          return e.spID == nv;\n        });\n        this.inspName = f.spName;\n        this.inpoints = f.points;\n      }\n    },\n    transferAmount: function transferAmount(nv) {\n      if (nv > this.outpoints) {\n        this.transferAmount = this.outpoints;\n      }\n    }\n  }\n};",{"version":3,"sources":["UserWalletTransfer.vue"],"names":[],"mappings":"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","sourcesContent":["<template src=\"./UserWalletTransfer.html\"></template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\nexport default {\r\n  data() {\r\n    return {\r\n      siteID: this.$global.siteID,\r\n      mainbalance: null,\r\n      wallentList: [],\r\n      // wallentListBalance: [],\r\n      userinfo: null,\r\n      showtransfer: false,\r\n      accountTypeSelector: null,\r\n      //转入 转出\r\n      transferAmount: null,\r\n      picked: null,\r\n      outid: null,\r\n      inid: null,\r\n      outspName: null,\r\n      outpoints: null,\r\n      inspName: null,\r\n      inpoints: null,\r\n      //转账类型\r\n      transferTypeName: null,\r\n      transferType: null,\r\n      showType: false,\r\n      autoTransAmt: 0,\r\n      //金錢選擇\r\n      selectorMoney: [\r\n        { point: 100 },\r\n        { point: 500 },\r\n        { point: 1000 },\r\n        { point: 5000 },\r\n        { point: 9999 }\r\n      ]\r\n    };\r\n  },\r\n  mounted() {\r\n    let _this = this;\r\n    _this.getuserinfo();\r\n  },\r\n  methods: {\r\n    getWalletList() {\r\n      let _this = this;\r\n      let _web = JSON.parse(this.getCookie(\"webs\"));\r\n      // _this.balance = _web.balance;\r\n      let loginID = _web.loginID;\r\n      let Authorization = _web.Authorization;\r\n      this.$axios(\r\n        \"getwalletlist\",\r\n        {\r\n          siteID: this.siteID,\r\n          loginID: loginID,\r\n          token: Authorization\r\n        },\r\n        resp => {\r\n          let res = JSON.parse(resp.data);\r\n          let list = res.data;\r\n\r\n          _this.wallentList = res.data.filter(function(i) {\r\n            let f = _this.userinfo.data.find(function(e) {\r\n              return i.spID == e.spid;\r\n            });\r\n            if (f != undefined) {\r\n              i.points = f.points;\r\n              if (i.spID == 0) {\r\n                _this.mainbalance = f.points;\r\n              }\r\n              if (i.spID == 43) {\r\n                i.src = require(\"@/assets/img/CQ92.png\");\r\n              }\r\n              if (i.spID == 54) {\r\n                i.src = require(\"@/assets/img/LEG.png\");\r\n              }\r\n            }\r\n            return !i.isOwn && i.spID != 0;\r\n          });\r\n        }\r\n      );\r\n    },\r\n    //取得会员资讯\r\n    getuserinfo() {\r\n      let _this = this;\r\n      _this.transferCancel();\r\n      let _web = JSON.parse(this.getCookie(\"webs\"));\r\n      // _this.balance = _web.balance;\r\n      let loginID = _web.loginID;\r\n      let Authorization = _web.Authorization;\r\n      this.$axios(\r\n        \"getuserinfo\",\r\n        {\r\n          jsonString: {\r\n            siteID: this.siteID,\r\n            loginID: loginID\r\n          },\r\n          token: Authorization\r\n        },\r\n        resp => {\r\n          let res = JSON.parse(resp.data);\r\n          let list = res.data;\r\n          let info = res.info;\r\n          // _this.wallentListBalance = [];\r\n          _this.userinfo = res;\r\n          let autoTransType = info.autoTransType;\r\n\r\n          switch (autoTransType) {\r\n            case 1:\r\n              _this.accountTypeSelector = \"自订\";\r\n              break;\r\n            case 2:\r\n              _this.accountTypeSelector = \"免转钱包\";\r\n              break;\r\n            default:\r\n              _this.accountTypeSelector = \"智充宝\";\r\n              break;\r\n          }\r\n          // for (let i = 0; i < list.length; i++) {\r\n          //   if (list[i].spid != 0) {\r\n          //     _this.wallentListBalance.push(list[i]);\r\n          //   }\r\n          // }\r\n          _this.getWalletList();\r\n        }\r\n      );\r\n    },\r\n\r\n    transOut(v) {\r\n      if (v.spStatus == 2) return;\r\n      this.showtransfer = true;\r\n      this.outid = v.spID;\r\n      this.inid = 0;\r\n    },\r\n    transIn(v) {\r\n      if (v.spStatus == 2) return;\r\n      this.showtransfer = true;\r\n      this.outid = 0;\r\n      this.inid = v.spID;\r\n    },\r\n    transferCancel() {\r\n      this.showtransfer = false;\r\n      this.transferAmount = null;\r\n      this.outid = null;\r\n      this.inid = null;\r\n    },\r\n    //一键回收\r\n    alltransferOutWallet() {\r\n      let _this = this;\r\n      let _web = JSON.parse(this.getCookie(\"webs\"));\r\n      let loginID = _web.loginID;\r\n      let Authorization = _web.Authorization;\r\n      this.$axios(\r\n        \"alltransferOutWallet\",\r\n        {\r\n          siteID: this.siteID,\r\n          loginID: loginID,\r\n          token: Authorization\r\n        },\r\n        resp => {\r\n          let res = JSON.parse(resp.data);\r\n          let list = res.data;\r\n          if (res.error._error) {\r\n            // errorToast(res.error._error);\r\n          } else if (res.message) {\r\n            _this.getuserinfo();\r\n          }\r\n        }\r\n      );\r\n    },\r\n    //转入转出\r\n    transferWallet() {\r\n      let _this = this;\r\n      let _web = JSON.parse(this.getCookie(\"webs\"));\r\n      // _this.balance = _web.balance;\r\n      let loginID = _web.loginID;\r\n      let Authorization = _web.Authorization;\r\n      if (this.outpoints < this.transferAmount || this.transferAmount < 1) {\r\n        alert(\"账户余额不足\");\r\n        return;\r\n      }\r\n      this.$axios(\r\n        \"TransferWallet\",\r\n        {\r\n          siteID: this.siteID,\r\n          loginID: loginID,\r\n          fromWalletID: this.outid,\r\n          toWalletID: this.inid,\r\n          amount: this.transferAmount,\r\n          token: Authorization\r\n        },\r\n        resp => {\r\n          let res = JSON.parse(resp.data);\r\n          let list = res.data;\r\n          if (res.message) {\r\n            alert(res.message);\r\n            _this.getuserinfo();\r\n          }\r\n        }\r\n      );\r\n    },\r\n    //一鍵轉出\r\n    transferOutOneWallet(v) {\r\n      if (v.spStatus == 2) return;\r\n      let _this = this;\r\n      let _web = JSON.parse(this.getCookie(\"webs\"));\r\n      let loginID = _web.loginID;\r\n      let Authorization = _web.Authorization;\r\n      this.$axios(\r\n        \"TransferOutOneWallet\",\r\n        {\r\n          siteID: this.siteID,\r\n          loginID: loginID,\r\n          walletID: v.spID,\r\n          token: Authorization\r\n        },\r\n        resp => {\r\n          let res = JSON.parse(resp.data);\r\n          let list = res.data;\r\n          if (res.error._error) {\r\n            alert(res.error._error);\r\n          } else if (res.message) {\r\n            alert(res.message);\r\n            _this.getuserinfo();\r\n          }\r\n        }\r\n      );\r\n    },\r\n    //一鍵轉入\r\n    allTransferInWallet(v) {\r\n      if (v.spStatus == 2) return;\r\n      let _this = this;\r\n      let _web = JSON.parse(this.getCookie(\"webs\"));\r\n      let loginID = _web.loginID;\r\n      let Authorization = _web.Authorization;\r\n      this.$axios(\r\n        \"AllTransferInWallet\",\r\n        {\r\n          siteID: this.siteID,\r\n          loginID: loginID,\r\n          walletID: v.spID,\r\n          token: Authorization\r\n        },\r\n        resp => {\r\n          let res = JSON.parse(resp.data);\r\n          let list = res.data;\r\n          if (res.error._error) {\r\n            alert(res.error._error);\r\n          } else if (res.message) {\r\n            alert(res.message);\r\n            _this.getuserinfo();\r\n          }\r\n        }\r\n      );\r\n    }\r\n  },\r\n  created() {\r\n    // 1. 呼叫 api action\r\n    this.$store.dispatch(\"actionAJAXexample\");\r\n  },\r\n  computed: mapGetters({\r\n    // 6. 等待通知.. 調用 getter function 取得 state\r\n    datalist: \"getDatalist\"\r\n  }),\r\n  watch: {\r\n    outid(nv, ov) {\r\n      if (nv == null) {\r\n        this.outspName = null;\r\n        this.outpoints = null;\r\n      } else if (nv == 0) {\r\n        this.outspName = \"主账户\";\r\n        this.outpoints = this.mainbalance;\r\n      } else {\r\n        let f = this.wallentList.find(e => {\r\n          return e.spID == nv;\r\n        });\r\n        this.outspName = f.spName;\r\n        this.outpoints = f.points;\r\n      }\r\n    },\r\n    inid(nv, ov) {\r\n      if (nv == null) {\r\n        this.inspName = null;\r\n        this.inpoints = null;\r\n      } else if (nv == 0) {\r\n        this.inspName = \"主账户\";\r\n        this.inpoints = this.mainbalance;\r\n      } else {\r\n        let f = this.wallentList.find(function(e) {\r\n          return e.spID == nv;\r\n        });\r\n        this.inspName = f.spName;\r\n        this.inpoints = f.points;\r\n      }\r\n    },\r\n    transferAmount(nv) {\r\n      if (nv > this.outpoints) {\r\n        this.transferAmount = this.outpoints;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style src=\"./UserWalletTransfer.css\" scoped></style>"],"sourceRoot":"src/views/user"}]}